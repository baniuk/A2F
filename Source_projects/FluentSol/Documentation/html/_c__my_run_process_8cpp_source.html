<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>cape2fluent: Plik źródłowy C_myRunProcess.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Wygenerowano przez Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Strona&nbsp;główna</span></a></li>
      <li><a href="pages.html"><span>Dodatkowe&nbsp;strony</span></a></li>
      <li><a href="namespaces.html"><span>Przestrzenie&nbsp;nazw</span></a></li>
      <li><a href="annotated.html"><span>Klasy</span></a></li>
      <li class="current"><a href="files.html"><span>Pliki</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>Lista&nbsp;plików</span></a></li>
      <li><a href="globals.html"><span>Składowe&nbsp;plików</span></a></li>
    </ul>
  </div>
<h1>C_myRunProcess.cpp</h1><a href="_c__my_run_process_8cpp.html">Idź do dokumentacji tego pliku.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#include &quot;<a class="code" href="stdafx_8h.html">StdAfx.h</a>&quot;</span>
<a name="l00002"></a>00002 <span class="preprocessor">#include &quot;<a class="code" href="_c__my_run_process_8h.html">C_myRunProcess.h</a>&quot;</span>
<a name="l00003"></a>00003 
<a name="l00004"></a><a class="code" href="_c__my_run_process_8cpp.html#ae71449b1cc6e6250b91f539153a7a0d3">00004</a> <span class="preprocessor">#define M_PI 3.14159265358979323846264338327950288419716939937510</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span>
<a name="l00006"></a><a class="code" href="class_c__my_run_process.html#a218856e3338f20f76a0c2d750fa633d4">00006</a> <a class="code" href="class_c__my_run_process.html#a218856e3338f20f76a0c2d750fa633d4" title="Konstruktor - pobiera klasę do obsługi błędów oraz odniesienie do klasy przechowującej...">C_myRunProcess::C_myRunProcess</a>(<a class="code" href="class_c___error.html" title="Klasa do obsługi błędów.">C_Error</a>* perr,<a class="code" href="class_c___params.html" title="Klasa do obsługi jezyka skryptowego do przekazaywnia parametrów z wykorzystaniem...">C_Params</a>* params)
<a name="l00007"></a>00007 {
<a name="l00008"></a>00008  <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a> = perr;
<a name="l00009"></a>00009  <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a> = params;
<a name="l00010"></a>00010 <span class="comment">// procname = TEXT(&quot;e:\\FluentInc\\ntbin\\ntx86\\fluent.exe&quot;);</span>
<a name="l00011"></a>00011  <a class="code" href="class_c__my_run_process.html#a80743f1f3f2ab62960dc05644d985946">parname</a> = TEXT(<span class="stringliteral">&quot; 3ddp&quot;</span>);
<a name="l00012"></a>00012 <span class="comment">// subprocname = TEXT(&quot;fl6326s.exe&quot;);</span>
<a name="l00013"></a>00013  <a class="code" href="class_c__my_run_process.html#a83e882d315a2f3d233fedf91cb29a62f" title="jesli 1 to parametry aktualne">paramsval</a> = FALSE;
<a name="l00014"></a>00014 
<a name="l00015"></a>00015 }
<a name="l00016"></a>00016 
<a name="l00017"></a><a class="code" href="class_c__my_run_process.html#aa00fef1c5e1d1d23188d631fd84deac0">00017</a> <a class="code" href="class_c__my_run_process.html#aa00fef1c5e1d1d23188d631fd84deac0">C_myRunProcess::~C_myRunProcess</a>(<span class="keywordtype">void</span>)
<a name="l00018"></a>00018 {
<a name="l00019"></a>00019 
<a name="l00020"></a>00020 }
<a name="l00021"></a>00021 
<a name="l00022"></a><a class="code" href="class_c__my_run_process.html#a4c5555e8dc1c88ff665e247f371f73ef">00022</a> BOOL <a class="code" href="class_c__my_run_process.html#a4c5555e8dc1c88ff665e247f371f73ef">C_myRunProcess::StartFluent</a>(<span class="keywordtype">void</span>)
<a name="l00025"></a>00025 {
<a name="l00026"></a>00026  BOOL ret;
<a name="l00027"></a>00027  BOOL ret1;
<a name="l00028"></a>00028  STARTUPINFO si;
<a name="l00029"></a>00029     PROCESS_INFORMATION pi;
<a name="l00030"></a>00030  ZeroMemory( &amp;si, <span class="keyword">sizeof</span>(si) );
<a name="l00031"></a>00031     si.cb = <span class="keyword">sizeof</span>(si);
<a name="l00032"></a>00032     ZeroMemory( &amp;pi, <span class="keyword">sizeof</span>(pi) );
<a name="l00033"></a>00033 
<a name="l00034"></a>00034  si.lpDesktop = NULL;
<a name="l00035"></a>00035  
<a name="l00036"></a>00036   CComBSTR ff = <span class="stringliteral">&quot; 3ddp&quot;</span>;
<a name="l00037"></a>00037 <span class="comment">// CComBSTR gg = &quot;g:\\ANSYS Inc\\v120\\fluent\\ntbin\\ntx86\\fluent.exe&quot;;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039  ret1 = CreateProcess(<a class="code" href="class_c__my_run_process.html#accc481ce64190290a2ba26748f0af68f">procname</a>,
<a name="l00040"></a>00040      <a class="code" href="class_c__my_run_process.html#a80743f1f3f2ab62960dc05644d985946">parname</a>,
<a name="l00041"></a>00041      NULL,
<a name="l00042"></a>00042      NULL,
<a name="l00043"></a>00043      FALSE,
<a name="l00044"></a>00044      0,
<a name="l00045"></a>00045      NULL,
<a name="l00046"></a>00046      NULL,
<a name="l00047"></a>00047      &amp;si,
<a name="l00048"></a>00048      &amp;pi);
<a name="l00049"></a>00049 
<a name="l00050"></a>00050  <span class="keywordflow">if</span>(ret1!=0) {
<a name="l00051"></a>00051   <span class="keywordtype">size_t</span> origsize = strlen(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad24e9e1a6fc1c087e52e938aefe337cf">bSUBPROCNAME</a>) + 1;
<a name="l00052"></a>00052   <span class="keyword">const</span> <span class="keywordtype">size_t</span> newsize = <a class="code" href="definicje_8h.html#ab5187269936538ffb8ccbbe7115ffdbc">MAX_STRING</a>;
<a name="l00053"></a>00053   <span class="keywordtype">size_t</span> convertedChars = 0;
<a name="l00054"></a>00054   <span class="keywordtype">wchar_t</span> wcstring[newsize];
<a name="l00055"></a>00055   mbstowcs_s(&amp;convertedChars, wcstring, origsize, <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad24e9e1a6fc1c087e52e938aefe337cf">bSUBPROCNAME</a>, _TRUNCATE);
<a name="l00056"></a>00056   ret = <a class="code" href="class_c__my_run_process.html#a06bdfb895da68f5d45e769f4986a43c5">WaitForStart</a>(wcstring,3, 6);
<a name="l00057"></a>00057  } <span class="keywordflow">else</span> {
<a name="l00058"></a>00058   <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;StartFluent::Function failed&quot;</span>);
<a name="l00059"></a>00059   ret = <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00060"></a>00060  }
<a name="l00061"></a>00061 
<a name="l00062"></a>00062  <span class="keywordflow">return</span> ret;
<a name="l00063"></a>00063 }
<a name="l00064"></a>00064 
<a name="l00065"></a><a class="code" href="class_c__my_run_process.html#a06bdfb895da68f5d45e769f4986a43c5">00065</a> BOOL <a class="code" href="class_c__my_run_process.html#a06bdfb895da68f5d45e769f4986a43c5">C_myRunProcess::WaitForStart</a>(TCHAR* nazwa, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> obrot, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> czas)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069   <span class="comment">// czeka czas sekund na start i pozniej zwraca błąd. Proboje &quot;obrot&quot; razy</span>
<a name="l00070"></a>00070  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> licz = 0;
<a name="l00071"></a>00071  BOOL ret;
<a name="l00072"></a>00072 
<a name="l00073"></a>00073  <span class="keywordflow">while</span>(licz&lt;obrot)
<a name="l00074"></a>00074  {
<a name="l00075"></a>00075   ret = <a class="code" href="class_c__my_run_process.html#ac445542726d5877bef97f4f34fde85cd">WaitForProcess</a>(nazwa);
<a name="l00076"></a>00076   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>)
<a name="l00077"></a>00077    Sleep(czas*1000);
<a name="l00078"></a>00078   <span class="keywordflow">else</span>
<a name="l00079"></a>00079    <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00080"></a>00080   licz++;
<a name="l00081"></a>00081  }
<a name="l00082"></a>00082  <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;WaitForStart::Function failed&quot;</span>);
<a name="l00083"></a>00083  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>; <span class="comment">// nie uruchomiło się</span>
<a name="l00084"></a>00084 }
<a name="l00085"></a>00085 
<a name="l00086"></a><a class="code" href="class_c__my_run_process.html#ac445542726d5877bef97f4f34fde85cd">00086</a> BOOL <a class="code" href="class_c__my_run_process.html#ac445542726d5877bef97f4f34fde85cd">C_myRunProcess::WaitForProcess</a>(TCHAR* nazwa)
<a name="l00089"></a>00089 {
<a name="l00090"></a>00090  BOOL ret = <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00091"></a>00091  DWORD aProcesses[1024], cbNeeded, cProcesses;
<a name="l00092"></a>00092  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;
<a name="l00093"></a>00093 
<a name="l00094"></a>00094  <span class="keywordflow">if</span> ( !EnumProcesses( aProcesses, <span class="keyword">sizeof</span>(aProcesses), &amp;cbNeeded ) )
<a name="l00095"></a>00095  {
<a name="l00096"></a>00096   <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;WaitForProcess::Function failed&quot;</span>);
<a name="l00097"></a>00097         <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00098"></a>00098  }
<a name="l00099"></a>00099 
<a name="l00100"></a>00100  cProcesses = cbNeeded / <span class="keyword">sizeof</span>(DWORD);
<a name="l00101"></a>00101 
<a name="l00102"></a>00102  <span class="keywordflow">for</span> ( i = 0; i &lt; cProcesses; i++ ) {
<a name="l00103"></a>00103   <span class="keywordflow">if</span>( aProcesses[i] != 0) {
<a name="l00104"></a>00104    ret = <a class="code" href="class_c__my_run_process.html#af50c79d461121acff30f150025386622">PrintProcessNameAndID</a>( aProcesses[i], nazwa);
<a name="l00105"></a>00105    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>) {
<a name="l00106"></a>00106     <span class="keywordflow">break</span>;
<a name="l00107"></a>00107    }
<a name="l00108"></a>00108   }
<a name="l00109"></a>00109  }
<a name="l00110"></a>00110  <span class="keywordflow">return</span> ret;
<a name="l00111"></a>00111 }
<a name="l00112"></a>00112 
<a name="l00113"></a><a class="code" href="class_c__my_run_process.html#af50c79d461121acff30f150025386622">00113</a> BOOL <a class="code" href="class_c__my_run_process.html#af50c79d461121acff30f150025386622">C_myRunProcess::PrintProcessNameAndID</a>(DWORD processID, TCHAR* nazwa)
<a name="l00116"></a>00116 {
<a name="l00117"></a>00117  TCHAR szProcessName[MAX_PATH] = TEXT(<span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>);
<a name="l00118"></a>00118  DWORD d;
<a name="l00119"></a>00119 
<a name="l00120"></a>00120     <span class="comment">// Get a handle to the process.</span>
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     HANDLE hProcess = OpenProcess( PROCESS_QUERY_INFORMATION |
<a name="l00123"></a>00123                                    PROCESS_VM_READ|SYNCHRONIZE,
<a name="l00124"></a>00124                                    TRUE, processID );
<a name="l00125"></a>00125 
<a name="l00126"></a>00126     <span class="comment">// Get the process name.</span>
<a name="l00127"></a>00127 
<a name="l00128"></a>00128     <span class="keywordflow">if</span> (NULL != hProcess )
<a name="l00129"></a>00129     {
<a name="l00130"></a>00130         HMODULE hMod;
<a name="l00131"></a>00131         DWORD cbNeeded;
<a name="l00132"></a>00132 
<a name="l00133"></a>00133         <span class="keywordflow">if</span> ( EnumProcessModules( hProcess, &amp;hMod, <span class="keyword">sizeof</span>(hMod), 
<a name="l00134"></a>00134              &amp;cbNeeded) )
<a name="l00135"></a>00135         {
<a name="l00136"></a>00136             GetModuleBaseName( hProcess, hMod, szProcessName, 
<a name="l00137"></a>00137                                <span class="keyword">sizeof</span>(szProcessName)/<span class="keyword">sizeof</span>(TCHAR) );
<a name="l00138"></a>00138         }
<a name="l00139"></a>00139     }
<a name="l00140"></a>00140  
<a name="l00141"></a>00141 
<a name="l00142"></a>00142  <span class="keywordflow">if</span>(wcscmp(szProcessName,nazwa)==0) {
<a name="l00143"></a>00143   d = WaitForSingleObject( hProcess, INFINITE );
<a name="l00144"></a>00144   CloseHandle( hProcess );
<a name="l00145"></a>00145   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00146"></a>00146  }
<a name="l00147"></a>00147  <span class="keywordflow">else</span> {
<a name="l00148"></a>00148   CloseHandle( hProcess );
<a name="l00149"></a>00149   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00150"></a>00150  }
<a name="l00151"></a>00151 }
<a name="l00152"></a>00152 
<a name="l00153"></a><a class="code" href="class_c__my_run_process.html#afe8240365804cc09bf7df066c64859a6">00153</a> <span class="keywordtype">void</span> <a class="code" href="class_c__my_run_process.html#afe8240365804cc09bf7df066c64859a6" title="funkcja usuwa podwójnego slaska do ściezek, modyfikuje ciąg wejściowy">C_myRunProcess::RemoveDoubleSlash</a>(<span class="keywordtype">char</span>* in)
<a name="l00154"></a>00154 {
<a name="l00155"></a>00155  <span class="keywordtype">char</span> ttmp[<a class="code" href="definicje_8h.html#ab5187269936538ffb8ccbbe7115ffdbc">MAX_STRING</a>];
<a name="l00156"></a>00156 
<a name="l00157"></a>00157  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a;
<a name="l00158"></a>00158  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> licznik = 0;
<a name="l00159"></a>00159  <span class="keywordflow">for</span>(a=0;a&lt;strlen(in)-1;a++) {
<a name="l00160"></a>00160   <span class="keywordflow">if</span>(in[a]==<span class="charliteral">&#39;\\&#39;</span> &amp;&amp; in[a+1]==<span class="charliteral">&#39;\\&#39;</span>)
<a name="l00161"></a>00161    <span class="keywordflow">continue</span>;
<a name="l00162"></a>00162   <span class="keywordflow">else</span>
<a name="l00163"></a>00163    ttmp[licznik++] = in[a];
<a name="l00164"></a>00164  }
<a name="l00165"></a>00165  ttmp[licznik++] = in[a]; <span class="comment">// ostatni znak</span>
<a name="l00166"></a>00166  ttmp[licznik] = 0;      <span class="comment">// koniec ciągu</span>
<a name="l00167"></a>00167 
<a name="l00168"></a>00168  <span class="comment">// kopiowanie do wejściowego</span>
<a name="l00169"></a>00169  <span class="keywordflow">for</span>(a=0;a&lt;=licznik;a++)
<a name="l00170"></a>00170   in[a] = ttmp[a];
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 <span class="comment">// Tworzy środowisko do uruchomienia fluenta - generuje scm oraz journalC_Params</span>
<a name="l00174"></a><a class="code" href="class_c__my_run_process.html#af04033e23f541696c736ef795e864392">00174</a> BOOL <a class="code" href="class_c__my_run_process.html#af04033e23f541696c736ef795e864392" title="Tworzy środowisko do uruchomienia fluenta - generuje scm oraz journalC_Params.">C_myRunProcess::CreateEnv</a>(<span class="keywordtype">void</span>)
<a name="l00177"></a>00177 {
<a name="l00178"></a>00178  <span class="keywordtype">double</span> paramVal2;
<a name="l00179"></a>00179  <span class="keywordtype">char</span>* tmpin;
<a name="l00180"></a>00180  <span class="keywordtype">char</span>* tmpsurf;
<a name="l00181"></a>00181  <span class="keywordtype">char</span>* tmpmat;
<a name="l00182"></a>00182  FILE *fid;
<a name="l00183"></a>00183  CComBSTR jname = <span class="stringliteral">&quot;journal&quot;</span>;
<a name="l00184"></a>00184  CComBSTR ptmp;
<a name="l00185"></a>00185  CComBSTR fulljname;
<a name="l00186"></a>00186  CComBSTR etmp;
<a name="l00187"></a>00187  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a;
<a name="l00188"></a>00188  <span class="keywordtype">double</span> paramVal1;
<a name="l00189"></a>00189  BOOL ret;
<a name="l00190"></a>00190 
<a name="l00191"></a>00191  <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba13c45196813cb44e6e81e9c48a5ec1b4" title="scieżki">BASIC</a>)) {<span class="comment">// flag is set, dla bezpieczenstwa, zakladam ze obsluga błęów na zewnątrz</span>
<a name="l00192"></a>00192   <a class="code" href="class_c__my_run_process.html#a3b5d641493e2ad6f4f89443d182cbcf0">FLUENT_PATH</a> = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6c738e091cc2c800b10ee3f0ddaf1d59">bFLUENT_PATH</a>;
<a name="l00193"></a>00193   <a class="code" href="class_c__my_run_process.html#accc481ce64190290a2ba26748f0af68f">procname</a> = <a class="code" href="class_c__my_run_process.html#a3b5d641493e2ad6f4f89443d182cbcf0">FLUENT_PATH</a>;
<a name="l00194"></a>00194   fulljname = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00195"></a>00195   fulljname.Append(jname);
<a name="l00196"></a>00196  } <span class="keywordflow">else</span> {
<a name="l00197"></a>00197   <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::BASIC validation error - check if the script is complete&quot;</span>);
<a name="l00198"></a>00198   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00199"></a>00199  }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201  <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba99aa3cfd42d906f6767e9cf05c35c261" title="sciezki oraz parametry wywołania fluenta">PARAMS</a>)) {
<a name="l00202"></a>00202   <a class="code" href="class_c__my_run_process.html#aadf2e3904bc99ac5fc0945258be196b0">COMMAND_LINE</a> = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a30980f639a5d7faa1d0eb3dfb1a81f26">bCOMMAND_LINE</a>;
<a name="l00203"></a>00203   <a class="code" href="class_c__my_run_process.html#a80743f1f3f2ab62960dc05644d985946">parname</a> = <a class="code" href="class_c__my_run_process.html#aadf2e3904bc99ac5fc0945258be196b0">COMMAND_LINE</a>; <span class="comment">// są jakieś parametry, jesli nie to domyślny z konstruktora</span>
<a name="l00204"></a>00204  } <span class="keywordflow">else</span> {
<a name="l00205"></a>00205   <a class="code" href="class_c__my_run_process.html#aadf2e3904bc99ac5fc0945258be196b0">COMMAND_LINE</a> = <span class="stringliteral">&quot; 3ddp -g -i &quot;</span>;
<a name="l00206"></a>00206   <a class="code" href="class_c__my_run_process.html#aadf2e3904bc99ac5fc0945258be196b0">COMMAND_LINE</a>.Append(fulljname); <span class="comment">// dodawanie pliku journal do uruchomienia</span>
<a name="l00207"></a>00207   <a class="code" href="class_c__my_run_process.html#a80743f1f3f2ab62960dc05644d985946">parname</a> = <a class="code" href="class_c__my_run_process.html#aadf2e3904bc99ac5fc0945258be196b0">COMMAND_LINE</a>;
<a name="l00208"></a>00208  }
<a name="l00209"></a>00209  <span class="comment">// tu walidacja plików case i wynkow, jeśli ich nie ma to nic nie robimy</span>
<a name="l00210"></a>00210 <span class="comment">// usuwanie podwjnych // tylko do wpisu w pliku scm i journal</span>
<a name="l00211"></a>00211  <a class="code" href="class_c__my_run_process.html#afe8240365804cc09bf7df066c64859a6" title="funkcja usuwa podwójnego slaska do ściezek, modyfikuje ciąg wejściowy">RemoveDoubleSlash</a>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>);
<a name="l00212"></a>00212 
<a name="l00213"></a>00213  CW2A pszA(fulljname);
<a name="l00214"></a>00214  <span class="keywordflow">if</span>(fopen_s(&amp;fid,pszA,<span class="stringliteral">&quot;w+&quot;</span>)) {
<a name="l00215"></a>00215   <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Cant open journal file&quot;</span>);
<a name="l00216"></a>00216   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00217"></a>00217  }
<a name="l00218"></a>00218  fprintf(fid,<span class="stringliteral">&quot;(load \&quot;%s%s\&quot;)&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>,<span class="stringliteral">&quot;_starter.scm&quot;</span>); <span class="comment">// starter.scm - domyslna nazwa pliku scm uruchamianego przez journal</span>
<a name="l00219"></a>00219  fclose(fid);
<a name="l00220"></a>00220 <span class="comment">/* tworzenie scm dla:</span>
<a name="l00221"></a>00221 <span class="comment">      velocity_inlet</span>
<a name="l00222"></a>00222 <span class="comment">      bez energii</span>
<a name="l00223"></a>00223 <span class="comment">      dwa składniki (udział 0 do 1)</span>
<a name="l00224"></a>00224 <span class="comment">      podane na jedno wejscie</span>
<a name="l00225"></a>00225 <span class="comment">      jedno wyjście</span>
<a name="l00226"></a>00226 <span class="comment">      */</span>
<a name="l00229"></a>00229 <span class="comment">/* if (copyparams-&gt;ValidateParams(PROBLEM0)==OK) // reaktor-artykul-lam-zmiana-URANS-kwas-faza-ciagla_0_133s.cas</span>
<a name="l00230"></a>00230 <span class="comment"> {</span>
<a name="l00231"></a>00231 <span class="comment">  if (strcmp(copyparams-&gt;bSUBPROCNAME,&quot;fl12016s.exe&quot;)!=0)</span>
<a name="l00232"></a>00232 <span class="comment">  {</span>
<a name="l00233"></a>00233 <span class="comment">   err-&gt;AddError(&quot;CreateEnv::No valid version of Fluent found&quot;);</span>
<a name="l00234"></a>00234 <span class="comment">   return FAIL;</span>
<a name="l00235"></a>00235 <span class="comment">  } else {</span>
<a name="l00236"></a>00236 <span class="comment">   ptmp = copyparams-&gt;bDATA_PATH;</span>
<a name="l00237"></a>00237 <span class="comment">   ptmp.Append(L&quot;_starter.scm&quot;);</span>
<a name="l00238"></a>00238 <span class="comment">   CW2A pszB(ptmp);</span>
<a name="l00239"></a>00239 <span class="comment">   if(fopen_s(&amp;fid,pszB,&quot;w+&quot;)) {</span>
<a name="l00240"></a>00240 <span class="comment">    err-&gt;AddError(&quot;CreateEnv::Cant open scm file&quot;);</span>
<a name="l00241"></a>00241 <span class="comment">    return FAIL;</span>
<a name="l00242"></a>00242 <span class="comment">   }</span>
<a name="l00243"></a>00243 <span class="comment">   fulloutname = copyparams-&gt;bDATA_PATH;</span>
<a name="l00244"></a>00244 <span class="comment">   fulloutname.Append(L&quot;_out.prof&quot;);</span>
<a name="l00245"></a>00245 <span class="comment">   fprintf(fid,&quot;(ti-menu-load-string \&quot;!del %S\&quot;)\n&quot;,fulloutname); // kasowanie starego pliku</span>
<a name="l00246"></a>00246 <span class="comment">   ptmp = copyparams-&gt;bDATA_PATH;</span>
<a name="l00247"></a>00247 <span class="comment">   ptmp.Append(copyparams-&gt;bCASE_NAME);</span>
<a name="l00248"></a>00248 <span class="comment">   // fluent_scieżki-postepowania.txt</span>
<a name="l00249"></a>00249 <span class="comment">   if (copyparams-&gt;ValidateParams(ENERGY)!=OK)</span>
<a name="l00250"></a>00250 <span class="comment">   {</span>
<a name="l00251"></a>00251 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;file/read-case-data %S\&quot;)\n&quot;,ptmp);</span>
<a name="l00252"></a>00252 <span class="comment">    // odczytuję nazwę powierzchni skojarzonego z danym materiałem rozproszonym</span>
<a name="l00253"></a>00253 <span class="comment">    tmpmat = copyparams-&gt;bCOMPONENTS.GetSubString(1,COMPONENTS_NAZWA); // nazwa materiału rozproszonego</span>
<a name="l00254"></a>00254 <span class="comment">    int line = copyparams-&gt;bASSIGNS.GetLineIndex(tmpmat,ASSIGN_COMPONENTS_NAZWA); //numer lini w assigns zawierający nazwę materiału - zakłądam że nie ma niejednosznaczności - jeden materiał do jednego wejscia przypisany</span>
<a name="l00255"></a>00255 <span class="comment">    if(line&lt;0) {err-&gt;AddError(&quot;CreateEnv::Problem in ASSIGNS&quot;); return FAIL;}</span>
<a name="l00256"></a>00256 <span class="comment">    tmpsurf = copyparams-&gt;bASSIGNS.GetSubString(line,ASSIGN_SURF_NAME); // nazwa powierzchni skojarzona z materiałem</span>
<a name="l00257"></a>00257 <span class="comment">    tmpin = copyparams-&gt;bASSIGNS.GetSubString(line,ASSIGN_INPUTID);  // index wejscia w ASPENIE do którego podłączony jest dany materiał (numeracja od 1!!)</span>
<a name="l00258"></a>00258 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s\&quot;)\n&quot;,tmpsurf,&quot;mixture&quot;);</span>
<a name="l00259"></a>00259 <span class="comment"></span>
<a name="l00260"></a>00260 <span class="comment">    // dla rozproszonej wej1</span>
<a name="l00261"></a>00261 <span class="comment">    ret = Parameters.GetParameterP(tmpmat,PARAM_MOLEFLOW,paramVal1,atoi(tmpin)-1);</span>
<a name="l00262"></a>00262 <span class="comment">    ret = Parameters.GetParameterP(tmpmat,PARAM_MOLEFRACTION,paramVal2,atoi(tmpin)-1);</span>
<a name="l00263"></a>00263 <span class="comment">    if(ret==FAIL) {err-&gt;AddError(&quot;CreateEnv::Problem with material name&quot;); return FAIL;}</span>
<a name="l00264"></a>00264 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f %s %20.15f\&quot;)\n&quot;,</span>
<a name="l00265"></a>00265 <span class="comment">     tmpsurf,</span>
<a name="l00266"></a>00266 <span class="comment">     tmpmat,</span>
<a name="l00267"></a>00267 <span class="comment">     &quot;no&quot;,</span>
<a name="l00268"></a>00268 <span class="comment">     &quot;no&quot;,</span>
<a name="l00269"></a>00269 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00270"></a>00270 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00271"></a>00271 <span class="comment">     &quot;no&quot;,</span>
<a name="l00272"></a>00272 <span class="comment">     paramVal1,</span>
<a name="l00273"></a>00273 <span class="comment">     &quot;no&quot;,</span>
<a name="l00274"></a>00274 <span class="comment">     paramVal2);</span>
<a name="l00275"></a>00275 <span class="comment"></span>
<a name="l00276"></a>00276 <span class="comment">    tmpmat = copyparams-&gt;bCOMPONENTS.GetSubString(0,COMPONENTS_NAZWA); // nazwa materiału nierozproszonego</span>
<a name="l00277"></a>00277 <span class="comment">    </span>
<a name="l00278"></a>00278 <span class="comment">    // dla nie rozproszonej wej1 </span>
<a name="l00279"></a>00279 <span class="comment">    ret = Parameters.GetParameterP(tmpmat,PARAM_MOLEFLOW,paramVal2,atoi(tmpin)-1);</span>
<a name="l00280"></a>00280 <span class="comment">    if(ret==FAIL) {err-&gt;AddError(&quot;CreateEnv::Problem with material name&quot;); return FAIL;}</span>
<a name="l00281"></a>00281 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f\&quot;)\n&quot;,</span>
<a name="l00282"></a>00282 <span class="comment">     tmpsurf,</span>
<a name="l00283"></a>00283 <span class="comment">     tmpmat,</span>
<a name="l00284"></a>00284 <span class="comment">     &quot;no&quot;,</span>
<a name="l00285"></a>00285 <span class="comment">     &quot;no&quot;,</span>
<a name="l00286"></a>00286 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00287"></a>00287 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00288"></a>00288 <span class="comment">     &quot;no&quot;,</span>
<a name="l00289"></a>00289 <span class="comment">     paramVal2);</span>
<a name="l00290"></a>00290 <span class="comment"></span>
<a name="l00291"></a>00291 <span class="comment">    // odczytuję nazwę powierzchni skojarzonego z danym materiałem nierozproszonym</span>
<a name="l00292"></a>00292 <span class="comment">    tmpmat = copyparams-&gt;bCOMPONENTS.GetSubString(0,COMPONENTS_NAZWA); // nazwa materiału nierozproszonego</span>
<a name="l00293"></a>00293 <span class="comment">    line = copyparams-&gt;bASSIGNS.GetLineIndex(tmpmat,ASSIGN_COMPONENTS_NAZWA); //numer lini w assigns zawierający nazwę materiału - zakłądam że nie ma niejednosznaczności - jeden materiał do jednego wejscia przypisany</span>
<a name="l00294"></a>00294 <span class="comment">    if(line&lt;0) {err-&gt;AddError(&quot;CreateEnv::Problem in ASSIGNS&quot;); return FAIL;}</span>
<a name="l00295"></a>00295 <span class="comment">    tmpsurf = copyparams-&gt;bASSIGNS.GetSubString(line,ASSIGN_SURF_NAME); // nazwa powierzchni skojarzona z materiałem</span>
<a name="l00296"></a>00296 <span class="comment">    tmpin = copyparams-&gt;bASSIGNS.GetSubString(line,ASSIGN_INPUTID);  // index wejscia w ASPENIE do którego podłączony jest dany materiał (numeracja od 1!!)</span>
<a name="l00297"></a>00297 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s\&quot;)\n&quot;,tmpsurf,&quot;mixture&quot;);</span>
<a name="l00298"></a>00298 <span class="comment"></span>
<a name="l00299"></a>00299 <span class="comment">    // dla rozproszonej wej2</span>
<a name="l00300"></a>00300 <span class="comment">    tmpmat = copyparams-&gt;bCOMPONENTS.GetSubString(1,COMPONENTS_NAZWA); // nazwa materiału rozproszonego</span>
<a name="l00301"></a>00301 <span class="comment">//    ret = Parameters.GetParameterP(tmpmat,PARAM_MOLEFLOW,paramVal1,atoi(tmpin)-1);</span>
<a name="l00302"></a>00302 <span class="comment">    ret = Parameters.GetParameterP(tmpmat,PARAM_MOLEFRACTION,paramVal2,atoi(tmpin)-1);</span>
<a name="l00303"></a>00303 <span class="comment">    if(ret==FAIL) {err-&gt;AddError(&quot;CreateEnv::Problem with material name&quot;); return FAIL;}</span>
<a name="l00304"></a>00304 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f %s %20.15f\&quot;)\n&quot;,</span>
<a name="l00305"></a>00305 <span class="comment">     tmpsurf,</span>
<a name="l00306"></a>00306 <span class="comment">     tmpmat,</span>
<a name="l00307"></a>00307 <span class="comment">     &quot;no&quot;,</span>
<a name="l00308"></a>00308 <span class="comment">     &quot;no&quot;,</span>
<a name="l00309"></a>00309 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00310"></a>00310 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00311"></a>00311 <span class="comment">     &quot;no&quot;,</span>
<a name="l00312"></a>00312 <span class="comment">     0.0,</span>
<a name="l00313"></a>00313 <span class="comment">     &quot;no&quot;,</span>
<a name="l00314"></a>00314 <span class="comment">     paramVal2);</span>
<a name="l00315"></a>00315 <span class="comment"></span>
<a name="l00316"></a>00316 <span class="comment">    // dla nie rozproszonej wej2 </span>
<a name="l00317"></a>00317 <span class="comment">    tmpmat = copyparams-&gt;bCOMPONENTS.GetSubString(0,COMPONENTS_NAZWA); // nazwa materiału nierozproszonego</span>
<a name="l00318"></a>00318 <span class="comment">    ret = Parameters.GetParameterP(tmpmat,PARAM_MOLEFLOW,paramVal2,atoi(tmpin)-1);</span>
<a name="l00319"></a>00319 <span class="comment">    if(ret==FAIL) {err-&gt;AddError(&quot;CreateEnv::Problem with material name&quot;); return FAIL;}</span>
<a name="l00320"></a>00320 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f\&quot;)\n&quot;,</span>
<a name="l00321"></a>00321 <span class="comment">     tmpsurf,</span>
<a name="l00322"></a>00322 <span class="comment">     tmpmat,</span>
<a name="l00323"></a>00323 <span class="comment">     &quot;no&quot;,</span>
<a name="l00324"></a>00324 <span class="comment">     &quot;no&quot;,</span>
<a name="l00325"></a>00325 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00326"></a>00326 <span class="comment">     &quot;yes&quot;,</span>
<a name="l00327"></a>00327 <span class="comment">     &quot;no&quot;,</span>
<a name="l00328"></a>00328 <span class="comment">     paramVal2);</span>
<a name="l00329"></a>00329 <span class="comment"></span>
<a name="l00330"></a>00330 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;solve/iterate %d\&quot;)\n&quot;,copyparams-&gt;bNUMOFITER);</span>
<a name="l00331"></a>00331 <span class="comment">    etmp = copyparams-&gt;bEXPORTS.GetSubString(0,EXPORT_NAME);</span>
<a name="l00332"></a>00332 <span class="comment">    for(a=1;a&lt;copyparams-&gt;bEXPORTS.GetIle();a++) {</span>
<a name="l00333"></a>00333 <span class="comment">     etmp.Append(L&quot; &quot;);</span>
<a name="l00334"></a>00334 <span class="comment">     etmp.Append(copyparams-&gt;bEXPORTS.GetSubString(a,EXPORT_NAME));</span>
<a name="l00335"></a>00335 <span class="comment">    }</span>
<a name="l00336"></a>00336 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;file/write-profile %S %s , %S\&quot;)\n&quot;,fulloutname,copyparams-&gt;bOUTPUT_SURFACE.DATA_CONTAINER[0],etmp);</span>
<a name="l00337"></a>00337 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;/\&quot;)\n&quot;);</span>
<a name="l00338"></a>00338 <span class="comment">    fprintf(fid,&quot;(ti-menu-load-string \&quot;exit yes\&quot;)&quot;);</span>
<a name="l00339"></a>00339 <span class="comment">   } </span>
<a name="l00340"></a>00340 <span class="comment">   else { // nie ma energii zaimplmentnowanej dla tego przypadku</span>
<a name="l00341"></a>00341 <span class="comment">    err-&gt;AddError(&quot;CreateEnv::Energy case not implemented yet&quot;);</span>
<a name="l00342"></a>00342 <span class="comment">    return FAIL;</span>
<a name="l00343"></a>00343 <span class="comment">   }</span>
<a name="l00344"></a>00344 <span class="comment">  } // if da właściwej wersji fluenta</span>
<a name="l00345"></a>00345 <span class="comment">  fclose(fid);</span>
<a name="l00346"></a>00346 <span class="comment">  return OK;</span>
<a name="l00347"></a>00347 <span class="comment"> } // if problem0</span>
<a name="l00348"></a>00348 <span class="comment">*/</span>
<a name="l00349"></a>00349  <span class="comment">/* tworzenie scm dla:</span>
<a name="l00350"></a>00350 <span class="comment">      velocity_inlet</span>
<a name="l00351"></a>00351 <span class="comment">      bez energii</span>
<a name="l00352"></a>00352 <span class="comment">      dwa składniki (udział 0 do 1)</span>
<a name="l00353"></a>00353 <span class="comment">      podane na jedno wejscie</span>
<a name="l00354"></a>00354 <span class="comment">      jedno wyjście</span>
<a name="l00355"></a>00355 <span class="comment">      model eulera!!!</span>
<a name="l00356"></a>00356 <span class="comment">      */</span>
<a name="l00358"></a>00358  <span class="keywordflow">if</span> (<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba2ff2c16a2d3f2e5599be85abb90e0c3d" title="Problem 0 - jeden wlot (dwie powierzchnie), wylot, dwa komponenty w strumieniu.">PROBLEM0</a>)==<a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>) <span class="comment">// reaktor-k-eps-URANS-amoniak-F_ciagla-new-22-00530.cas - model eulera</span>
<a name="l00359"></a>00359  {
<a name="l00360"></a>00360   <span class="keywordflow">if</span> (strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad24e9e1a6fc1c087e52e938aefe337cf">bSUBPROCNAME</a>,<span class="stringliteral">&quot;fl12016s.exe&quot;</span>)!=0 &amp;&amp; strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad24e9e1a6fc1c087e52e938aefe337cf">bSUBPROCNAME</a>,<span class="stringliteral">&quot;fl1214s.exe&quot;</span>)!=0)
<a name="l00361"></a>00361   {
<a name="l00362"></a>00362    <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::No valid version of Fluent found&quot;</span>);
<a name="l00363"></a>00363    <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00364"></a>00364   } <span class="keywordflow">else</span> {
<a name="l00365"></a>00365    ptmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00366"></a>00366    ptmp.Append(L<span class="stringliteral">&quot;_starter.scm&quot;</span>);
<a name="l00367"></a>00367    CW2A pszB(ptmp);
<a name="l00368"></a>00368    <span class="keywordflow">if</span>(fopen_s(&amp;fid,pszB,<span class="stringliteral">&quot;w+&quot;</span>)) {
<a name="l00369"></a>00369     <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Cant open scm file&quot;</span>);
<a name="l00370"></a>00370     <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00371"></a>00371    }
<a name="l00372"></a>00372    <a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a> = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00373"></a>00373    <a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>.Append(L<span class="stringliteral">&quot;_out.prof&quot;</span>);
<a name="l00374"></a>00374    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;!del %S\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>); <span class="comment">// kasowanie starego pliku</span>
<a name="l00375"></a>00375    ptmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00376"></a>00376    ptmp.Append(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#adfb69d14da610b8179cf615fa30c92ea">bCASE_NAME</a>);
<a name="l00377"></a>00377    <span class="comment">// fluent_scieżki-postepowania2.txt</span>
<a name="l00378"></a>00378    <span class="keywordflow">if</span> (<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49babc1e15cc4a1ee864210dbada3bda6842" title="równania energii włączeone">ENERGY</a>)!=<a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>)
<a name="l00379"></a>00379    {
<a name="l00380"></a>00380     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;file/read-case-data %S\&quot;)\n&quot;</span>,ptmp);
<a name="l00381"></a>00381     <span class="comment">// odczytuję nazwę powierzchni skojarzonego z danym materiałem rozproszonym</span>
<a name="l00382"></a>00382     tmpmat = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(1,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>); <span class="comment">// nazwa materiału rozproszonego</span>
<a name="l00383"></a>00383     <span class="keywordtype">int</span> line = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a1f2247e03f494d45dd2bacf4fde00c92" title="Zwraca numer linii zawierającej dany ciąg tekstowy na danej pozycji podciągu....">GetLineIndex</a>(tmpmat,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97a5412f41e0ca92fdb3faff46bf390d943">ASSIGN_COMPONENTS_NAZWA</a>); <span class="comment">//numer lini w assigns zawierający nazwę materiału - zakłądam że nie ma niejednosznaczności - jeden materiał do jednego wejscia przypisany</span>
<a name="l00384"></a>00384     <span class="keywordflow">if</span>(line&lt;0) {<a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Problem in ASSIGNS&quot;</span>); <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;}
<a name="l00385"></a>00385     tmpsurf = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97a7247cd4d1a5ee45dbf990c5d0b51e6db">ASSIGN_SURF_NAME</a>); <span class="comment">// nazwa powierzchni skojarzona z materiałem</span>
<a name="l00386"></a>00386     tmpin = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97ae2594cac7c9c8316fe9ebe0ec204d151">ASSIGN_INPUTID</a>);  <span class="comment">// index wejscia w ASPENIE do którego podłączony jest dany materiał (numeracja od 1!!)</span>
<a name="l00387"></a>00387 <span class="comment">//    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s\&quot;)\n&quot;,tmpsurf,&quot;mixture&quot;);</span>
<a name="l00388"></a>00388 
<a name="l00389"></a>00389     <span class="comment">// dla rozproszonej wej1</span>
<a name="l00390"></a>00390     ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(tmpmat,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,paramVal1,atoi(tmpin)-1);
<a name="l00391"></a>00391     ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(tmpmat,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,paramVal2,atoi(tmpin)-1);
<a name="l00392"></a>00392     <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) {<a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Problem with material name&quot;</span>); <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;}
<a name="l00393"></a>00393     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f %s %s %20.15f %s %20.15f %s %20.15f\&quot;)\n&quot;</span>,
<a name="l00394"></a>00394      tmpsurf,
<a name="l00395"></a>00395      tmpmat,
<a name="l00396"></a>00396      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00397"></a>00397      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00398"></a>00398      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00399"></a>00399      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00400"></a>00400      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00401"></a>00401      paramVal1,
<a name="l00402"></a>00402      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00403"></a>00403      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00404"></a>00404      0.01,
<a name="l00405"></a>00405      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00406"></a>00406      0.01,
<a name="l00407"></a>00407      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00408"></a>00408      paramVal2);
<a name="l00409"></a>00409 
<a name="l00410"></a>00410     tmpmat = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>); <span class="comment">// nazwa materiału nierozproszonego</span>
<a name="l00411"></a>00411     
<a name="l00412"></a>00412     <span class="comment">// dla nie rozproszonej wej1 </span>
<a name="l00413"></a>00413     ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(tmpmat,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,paramVal2,atoi(tmpin)-1);
<a name="l00414"></a>00414     <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) {<a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Problem with material name&quot;</span>); <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;}
<a name="l00415"></a>00415     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f %s %s %20.15f %s %20.15f\&quot;)\n&quot;</span>,
<a name="l00416"></a>00416      tmpsurf,
<a name="l00417"></a>00417      tmpmat,
<a name="l00418"></a>00418      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00419"></a>00419      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00420"></a>00420      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00421"></a>00421      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00422"></a>00422      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00423"></a>00423      paramVal2,
<a name="l00424"></a>00424      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00425"></a>00425      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00426"></a>00426      0.0,
<a name="l00427"></a>00427      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00428"></a>00428      0.0);
<a name="l00429"></a>00429 
<a name="l00430"></a>00430     <span class="comment">// odczytuję nazwę powierzchni skojarzonego z danym materiałem ciągłym</span>
<a name="l00431"></a>00431     tmpmat = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>); <span class="comment">// nazwa materiału nierozproszonego</span>
<a name="l00432"></a>00432     line = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a1f2247e03f494d45dd2bacf4fde00c92" title="Zwraca numer linii zawierającej dany ciąg tekstowy na danej pozycji podciągu....">GetLineIndex</a>(tmpmat,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97a5412f41e0ca92fdb3faff46bf390d943">ASSIGN_COMPONENTS_NAZWA</a>); <span class="comment">//numer lini w assigns zawierający nazwę materiału - zakłądam że nie ma niejednosznaczności - jeden materiał do jednego wejscia przypisany</span>
<a name="l00433"></a>00433     <span class="keywordflow">if</span>(line&lt;0) {<a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Problem in ASSIGNS&quot;</span>); <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;}
<a name="l00434"></a>00434     tmpsurf = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97a7247cd4d1a5ee45dbf990c5d0b51e6db">ASSIGN_SURF_NAME</a>); <span class="comment">// nazwa powierzchni skojarzona z materiałem</span>
<a name="l00435"></a>00435     tmpin = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97ae2594cac7c9c8316fe9ebe0ec204d151">ASSIGN_INPUTID</a>);  <span class="comment">// index wejscia w ASPENIE do którego podłączony jest dany materiał (numeracja od 1!!)</span>
<a name="l00436"></a>00436 <span class="comment">//    fprintf(fid,&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s\&quot;)\n&quot;,tmpsurf,&quot;mixture&quot;);</span>
<a name="l00437"></a>00437 
<a name="l00438"></a>00438     <span class="comment">// dla rozproszonej wej2</span>
<a name="l00439"></a>00439     tmpmat = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(1,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>); <span class="comment">// nazwa materiału rozproszonego</span>
<a name="l00440"></a>00440     ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(tmpmat,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,paramVal1,atoi(tmpin)-1);
<a name="l00441"></a>00441     ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(tmpmat,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,paramVal2,atoi(tmpin)-1);
<a name="l00442"></a>00442     <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) {<a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Problem with material name&quot;</span>); <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;}
<a name="l00443"></a>00443     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f %s %s %20.15f %s %20.15f %s %20.15f\&quot;)\n&quot;</span>,
<a name="l00444"></a>00444      tmpsurf,
<a name="l00445"></a>00445      tmpmat,
<a name="l00446"></a>00446      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00447"></a>00447      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00448"></a>00448      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00449"></a>00449      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00450"></a>00450      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00451"></a>00451      paramVal1,
<a name="l00452"></a>00452      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00453"></a>00453      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00454"></a>00454      0.0,
<a name="l00455"></a>00455      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00456"></a>00456      0.0,
<a name="l00457"></a>00457      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00458"></a>00458      paramVal2);
<a name="l00459"></a>00459     
<a name="l00460"></a>00460 
<a name="l00461"></a>00461     <span class="comment">// dla nie rozproszonej wej2 </span>
<a name="l00462"></a>00462     tmpmat = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>); <span class="comment">// nazwa materiału nierozproszonego</span>
<a name="l00463"></a>00463     ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(tmpmat,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,paramVal2,atoi(tmpin)-1);
<a name="l00464"></a>00464     <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) {<a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Problem with material name&quot;</span>); <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;}
<a name="l00465"></a>00465     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s %s %s %s %s %s %s %20.15f %s %s %20.15f %s %20.15f\&quot;)\n&quot;</span>,
<a name="l00466"></a>00466      tmpsurf,
<a name="l00467"></a>00467      tmpmat,
<a name="l00468"></a>00468      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00469"></a>00469      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00470"></a>00470      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00471"></a>00471      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00472"></a>00472      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00473"></a>00473      paramVal2,
<a name="l00474"></a>00474      <span class="stringliteral">&quot;yes&quot;</span>,
<a name="l00475"></a>00475      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00476"></a>00476      0.01,
<a name="l00477"></a>00477      <span class="stringliteral">&quot;no&quot;</span>,
<a name="l00478"></a>00478      0.01);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480     <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a18e086e6ea120dbdffe65ff667e00fb3">sNUMOFTIMESTEPS</a>==FALSE) <span class="comment">// czyli user nie podał ilości kroków - inicjalozacja tylko porzez solve/iterate</span>
<a name="l00481"></a>00481      fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;solve/iterate %d\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6d9d530e65df616072346697bb51885f">bNUMOFITER</a>);
<a name="l00482"></a>00482     <span class="keywordflow">else</span>
<a name="l00483"></a>00483      fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;solve/dual-time-iterate %d %d\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a003fd797038b0834243e5a65ad892de7">bNUMOFTIMESTEPS</a>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6d9d530e65df616072346697bb51885f">bNUMOFITER</a>);
<a name="l00484"></a>00484     etmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#aeab5e3f05378e5eb5ec519993130e19bae9512f35a1716117567676eef5bba7ea" title="nazwa funkcji exportowalej z Fluenta">EXPORT_NAME</a>);
<a name="l00485"></a>00485     <span class="keywordflow">for</span>(a=1;a&lt;<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>();a++) {
<a name="l00486"></a>00486      etmp.Append(L<span class="stringliteral">&quot; &quot;</span>);
<a name="l00487"></a>00487      etmp.Append(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(a,<a class="code" href="_c___params_8h.html#aeab5e3f05378e5eb5ec519993130e19bae9512f35a1716117567676eef5bba7ea" title="nazwa funkcji exportowalej z Fluenta">EXPORT_NAME</a>));
<a name="l00488"></a>00488     }
<a name="l00489"></a>00489     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;file/write-profile %S %s , %S\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a40e2d5c41b5e45ab7da608872331c33d">bOUTPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],etmp);
<a name="l00490"></a>00490     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;/\&quot;)\n&quot;</span>);
<a name="l00491"></a>00491     fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;exit yes\&quot;)&quot;</span>);
<a name="l00492"></a>00492    } 
<a name="l00493"></a>00493    <span class="keywordflow">else</span> { <span class="comment">// nie ma energii zaimplmentnowanej dla tego przypadku</span>
<a name="l00494"></a>00494     <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Energy case not implemented yet&quot;</span>);
<a name="l00495"></a>00495     <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00496"></a>00496    }
<a name="l00497"></a>00497   } <span class="comment">// if da właściwej wersji fluenta</span>
<a name="l00498"></a>00498   fclose(fid);
<a name="l00499"></a>00499   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00500"></a>00500  } <span class="comment">// if problem0</span>
<a name="l00501"></a>00501 
<a name="l00502"></a>00502 
<a name="l00503"></a>00503 <span class="comment">/* tworzenie scm dla: mass_flow_inlet</span>
<a name="l00504"></a>00504 <span class="comment">      wybór energii</span>
<a name="l00505"></a>00505 <span class="comment">      jedno wejście</span>
<a name="l00506"></a>00506 <span class="comment">      bez mieszaniny</span>
<a name="l00507"></a>00507 <span class="comment">      fluent: fl12016s.exe</span>
<a name="l00508"></a>00508 <span class="comment">      */</span>
<a name="l00509"></a>00509  <span class="keywordflow">if</span>( strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0e930ef00f35044a8a11dca5be4e3a92">bBOUND_COND</a>,<span class="stringliteral">&quot;mass-flow-inlet&quot;</span>)==0 &amp;&amp;
<a name="l00510"></a>00510   <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>()==1 &amp;&amp;
<a name="l00511"></a>00511   <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>()==0 )
<a name="l00512"></a>00512  {
<a name="l00513"></a>00513   ptmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00514"></a>00514   ptmp.Append(L<span class="stringliteral">&quot;_starter.scm&quot;</span>);
<a name="l00515"></a>00515   CW2A pszB(ptmp);
<a name="l00516"></a>00516   <span class="keywordflow">if</span>(fopen_s(&amp;fid,pszB,<span class="stringliteral">&quot;w+&quot;</span>)) {
<a name="l00517"></a>00517    <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Cant open scm file&quot;</span>);
<a name="l00518"></a>00518    <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00519"></a>00519   }
<a name="l00520"></a>00520   <a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a> = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00521"></a>00521   <a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>.Append(L<span class="stringliteral">&quot;_out.prof&quot;</span>);
<a name="l00522"></a>00522   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;!del %S\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>); <span class="comment">// kasowanie starego pliku</span>
<a name="l00523"></a>00523   ptmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00524"></a>00524   ptmp.Append(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#adfb69d14da610b8179cf615fa30c92ea">bCASE_NAME</a>);
<a name="l00525"></a>00525   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;file/read-case-data %S\&quot;)\n&quot;</span>,ptmp);
<a name="l00526"></a>00526   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/zone-type %s %s\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0e930ef00f35044a8a11dca5be4e3a92">bBOUND_COND</a>);
<a name="l00527"></a>00527   <span class="keywordflow">if</span>(strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a126de6d5ba14fc1e8b2e623678eef8b7">bENERGY_EQ</a>,<span class="stringliteral">&quot;yes&quot;</span>)==0) <span class="comment">// w zależności czy energia jest czy nie włązona są różne drogi przejścia przez parametry wejściowe</span>
<a name="l00528"></a>00528    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/mass-flow-inlet %s yes yes no %20.15f no %f no 0 yes yes no 0 no 0 no 1\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],<a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a>,<a class="code" href="class_c__my_run_process.html#ac3c7b3104b2ca8941bf792ee13e194e7">temperature</a>);
<a name="l00529"></a>00529   <span class="keywordflow">else</span>
<a name="l00530"></a>00530    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/mass-flow-inlet %s yes no %f no 0 yes yes no 0 no 0 no 1\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],<a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a>);
<a name="l00531"></a>00531 
<a name="l00532"></a>00532   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a18e086e6ea120dbdffe65ff667e00fb3">sNUMOFTIMESTEPS</a>==FALSE) <span class="comment">// czyli user nie podał ilości kroków - inicjalozacja tylko porzez solve/iterate</span>
<a name="l00533"></a>00533    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;solve/iterate %d\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6d9d530e65df616072346697bb51885f">bNUMOFITER</a>);
<a name="l00534"></a>00534   <span class="keywordflow">else</span>
<a name="l00535"></a>00535    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;solve/dual-time-iterate %d %d\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a003fd797038b0834243e5a65ad892de7">bNUMOFTIMESTEPS</a>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6d9d530e65df616072346697bb51885f">bNUMOFITER</a>);
<a name="l00536"></a>00536   etmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0];
<a name="l00537"></a>00537   <span class="keywordflow">for</span>(a=1;a&lt;<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>();a++) {
<a name="l00538"></a>00538    etmp.Append(L<span class="stringliteral">&quot; &quot;</span>);
<a name="l00539"></a>00539    etmp.Append(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[a]);
<a name="l00540"></a>00540   }
<a name="l00541"></a>00541   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;file/write-profile %S %s , %S\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a40e2d5c41b5e45ab7da608872331c33d">bOUTPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],etmp);
<a name="l00542"></a>00542   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;/\&quot;)\n&quot;</span>);
<a name="l00543"></a>00543   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;exit yes\&quot;)&quot;</span>);
<a name="l00544"></a>00544   fclose(fid);
<a name="l00545"></a>00545   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00546"></a>00546  } 
<a name="l00547"></a>00547 
<a name="l00548"></a>00548 <span class="comment">/* tworzenie scm dla: velocity_inlet</span>
<a name="l00549"></a>00549 <span class="comment">      wybór energii</span>
<a name="l00550"></a>00550 <span class="comment">      jedno wejście</span>
<a name="l00551"></a>00551 <span class="comment">      musi byc zdefiniowany choc jeden skladnik (gestosc)</span>
<a name="l00552"></a>00552 <span class="comment">      fluent: fl12016s.exe</span>
<a name="l00553"></a>00553 <span class="comment">      */</span>
<a name="l00554"></a>00554  <span class="keywordflow">if</span>( strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0e930ef00f35044a8a11dca5be4e3a92">bBOUND_COND</a>,<span class="stringliteral">&quot;velocity-inlet&quot;</span>)==0 &amp;&amp;
<a name="l00555"></a>00555   <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>()==1 &amp;&amp;
<a name="l00556"></a>00556   <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>()==1 )
<a name="l00557"></a>00557  {
<a name="l00558"></a>00558   ptmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00559"></a>00559   ptmp.Append(L<span class="stringliteral">&quot;_starter.scm&quot;</span>);
<a name="l00560"></a>00560   CW2A pszB(ptmp);
<a name="l00561"></a>00561   <span class="keywordflow">if</span>(fopen_s(&amp;fid,pszB,<span class="stringliteral">&quot;w+&quot;</span>)) {
<a name="l00562"></a>00562    <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::Cant open scm file&quot;</span>);
<a name="l00563"></a>00563    <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00564"></a>00564   }
<a name="l00565"></a>00565   <a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a> = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00566"></a>00566   <a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>.Append(L<span class="stringliteral">&quot;_out.prof&quot;</span>);
<a name="l00567"></a>00567   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;!del %S\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>); <span class="comment">// kasowanie starego pliku</span>
<a name="l00568"></a>00568   ptmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0988678eee07dae110bea7b760adfc73">bDATA_PATH</a>;
<a name="l00569"></a>00569   ptmp.Append(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#adfb69d14da610b8179cf615fa30c92ea">bCASE_NAME</a>);
<a name="l00570"></a>00570   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;file/read-case-data %S\&quot;)\n&quot;</span>,ptmp);
<a name="l00571"></a>00571   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/zone-type %s %s\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0e930ef00f35044a8a11dca5be4e3a92">bBOUND_COND</a>);
<a name="l00572"></a>00572   <span class="keywordflow">if</span>(strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a126de6d5ba14fc1e8b2e623678eef8b7">bENERGY_EQ</a>,<span class="stringliteral">&quot;yes&quot;</span>)==0) <span class="comment">// w zależności czy energia jest czy nie włązona są różne drogi przejścia przez parametry wejściowe</span>
<a name="l00573"></a>00573    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s yes yes no %20.15f yes no 0 no 0 no 1 no %f\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],<a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a>,<a class="code" href="class_c__my_run_process.html#ac3c7b3104b2ca8941bf792ee13e194e7">temperature</a>);
<a name="l00574"></a>00574   <span class="keywordflow">else</span>
<a name="l00575"></a>00575    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;define/boundary-conditions/velocity-inlet %s yes yes no %20.15f yes no 0 no 0 no 1\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],<a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a>);
<a name="l00576"></a>00576 
<a name="l00577"></a>00577   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a18e086e6ea120dbdffe65ff667e00fb3">sNUMOFTIMESTEPS</a>==FALSE) <span class="comment">// czyli user nie podał ilości kroków - inicjalozacja tylko porzez solve/iterate</span>
<a name="l00578"></a>00578    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;solve/iterate %d\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6d9d530e65df616072346697bb51885f">bNUMOFITER</a>);
<a name="l00579"></a>00579   <span class="keywordflow">else</span>
<a name="l00580"></a>00580    fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;solve/dual-time-iterate %d %d\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a003fd797038b0834243e5a65ad892de7">bNUMOFTIMESTEPS</a>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a6d9d530e65df616072346697bb51885f">bNUMOFITER</a>);
<a name="l00581"></a>00581   etmp = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0];
<a name="l00582"></a>00582   <span class="keywordflow">for</span>(a=1;a&lt;<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>();a++) {
<a name="l00583"></a>00583    etmp.Append(L<span class="stringliteral">&quot; &quot;</span>);
<a name="l00584"></a>00584    etmp.Append(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[a]);
<a name="l00585"></a>00585   }
<a name="l00586"></a>00586   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;file/write-profile %S %s , %S\&quot;)\n&quot;</span>,<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>,<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a40e2d5c41b5e45ab7da608872331c33d">bOUTPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0],etmp);
<a name="l00587"></a>00587   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;/\&quot;)\n&quot;</span>);
<a name="l00588"></a>00588   fprintf(fid,<span class="stringliteral">&quot;(ti-menu-load-string \&quot;exit yes\&quot;)&quot;</span>);
<a name="l00589"></a>00589   fclose(fid);
<a name="l00590"></a>00590   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00591"></a>00591  }
<a name="l00592"></a>00592  <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;CreateEnv::No valid boundary found in script or not alloved combination of phases and boundary conditions&quot;</span>); <span class="comment">// tu musi byc lepszy opis bo to moze byc czesty blad</span>
<a name="l00593"></a>00593  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00594"></a>00594 }
<a name="l00595"></a>00595 
<a name="l00596"></a><a class="code" href="class_c__my_run_process.html#a96de0e119537f9f36f3cfaa8da96280f">00596</a> BOOL <a class="code" href="class_c__my_run_process.html#a96de0e119537f9f36f3cfaa8da96280f" title="Wczytuje dane z Fluenta.">C_myRunProcess::ImportData</a>(<span class="keywordtype">void</span>)
<a name="l00599"></a>00599 {
<a name="l00600"></a>00600  FILE *fid;
<a name="l00601"></a>00601  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> a;
<a name="l00602"></a>00602  <span class="keywordtype">char</span> ch;
<a name="l00603"></a>00603  <span class="keywordtype">char</span>* cont;
<a name="l00604"></a>00604  <span class="keywordtype">char</span> buff[<a class="code" href="definicje_8h.html#ab5187269936538ffb8ccbbe7115ffdbc">MAX_STRING</a>];
<a name="l00605"></a>00605  fpos_t *poz=NULL;
<a name="l00606"></a>00606  BOOL znalezione;
<a name="l00607"></a>00607  <span class="keywordtype">double</span> tmp,suma;
<a name="l00608"></a>00608  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ile;
<a name="l00609"></a>00609  <span class="keywordtype">double</span> SRtmp, SUMtmp;
<a name="l00610"></a>00610  <span class="keywordtype">char</span> *tmpname, *tmppar; <span class="comment">// nazwa komponentu oraz nazwa parametru dla danej linii</span>
<a name="l00611"></a>00611  <a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889d">nazwy_parametrow</a> par;
<a name="l00612"></a>00612  
<a name="l00613"></a>00613 <span class="comment">//fulloutname = &quot;j:\\ASPEN_PROJECT\\FluentSol\\fluentdata\\ruratest&quot;;</span>
<a name="l00616"></a>00616 <span class="comment"></span> <a class="code" href="class_c__my_run_process.html#a043667b22534fee299f3e8847c8a83b0" title="tu przechowuję zaimportowane parametry, - suma z zaimportowanych dla wszystkich...">SUM</a>.<a class="code" href="class_c___parameter___container.html#ab196d93942c6d400b84af39e68ede81b" title="Kasuje zawartość klasy - wszystkich danych.">ClearAll</a>();
<a name="l00617"></a>00617  <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#ab196d93942c6d400b84af39e68ede81b" title="Kasuje zawartość klasy - wszystkich danych.">ClearAll</a>();
<a name="l00619"></a>00619  CW2A pszA(<a class="code" href="class_c__my_run_process.html#aaf25ba1fc0838f800cb846100b1296db" title="nazwa pliku wyjściowego">fulloutname</a>);
<a name="l00620"></a>00620  <span class="keywordflow">if</span>(fopen_s(&amp;fid,pszA,<span class="stringliteral">&quot;r+&quot;</span>)) {
<a name="l00621"></a>00621   <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;ImportData::Cant open result dat file&quot;</span>);
<a name="l00622"></a>00622   <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00623"></a>00623  }
<a name="l00624"></a>00624  poz = <span class="keyword">new</span> fpos_t[<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>()];
<a name="l00625"></a>00625  <span class="keywordflow">for</span>(a=0;a&lt;<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>();a++) { <span class="comment">// po wszystkich parametrach</span>
<a name="l00626"></a>00626   cont = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(a,<a class="code" href="_c___params_8h.html#aeab5e3f05378e5eb5ec519993130e19bae9512f35a1716117567676eef5bba7ea" title="nazwa funkcji exportowalej z Fluenta">EXPORT_NAME</a>);
<a name="l00627"></a>00627   znalezione = FALSE;
<a name="l00628"></a>00628   <span class="keywordflow">while</span>(!feof(fid)) {    <span class="comment">// po całym pliku</span>
<a name="l00629"></a>00629    ch = (char)fgetc(fid);   <span class="comment">// jeden znak</span>
<a name="l00630"></a>00630    <span class="keywordflow">if</span>(ch==cont[0]) {    <span class="comment">// jeśli jest taki sam jak pierwszy znak to sprawdzamy całość</span>
<a name="l00631"></a>00631     fseek(fid,-1,SEEK_CUR);  <span class="comment">// cofamy o jeden zeby zniwelowac fgetc</span>
<a name="l00632"></a>00632     fgets(buff, strlen(cont)+1, fid);
<a name="l00633"></a>00633     <span class="keywordflow">if</span>(strcmp(buff,cont)==0) { <span class="comment">// to samo</span>
<a name="l00634"></a>00634      fgetpos(fid,&amp;poz[a]); <span class="comment">// zapamiętujemy pozycję</span>
<a name="l00635"></a>00635      znalezione = TRUE;
<a name="l00636"></a>00636      <span class="keywordflow">break</span>;
<a name="l00637"></a>00637     }
<a name="l00638"></a>00638    }
<a name="l00639"></a>00639   }
<a name="l00640"></a>00640   <span class="keywordflow">if</span>(znalezione==FALSE) { <span class="comment">// problem, nie znalezliśmy a powinno byc</span>
<a name="l00641"></a>00641    fclose(fid);
<a name="l00642"></a>00642    <a class="code" href="definicje_8h.html#a506b3685b3eb05aac751f9e14cbed93b">SAFE_DELETE_ARRAY</a>(poz);
<a name="l00643"></a>00643    <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>-&gt;<a class="code" href="class_c___error.html#a8b7364721f28a4ec024f2d9541619452" title="Dodaje komunikat o błędzie do listy.">AddError</a>(<span class="stringliteral">&quot;ImportData::Nothing imported&quot;</span>);
<a name="l00644"></a>00644    <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00645"></a>00645   }  
<a name="l00646"></a>00646  }
<a name="l00647"></a>00647 
<a name="l00648"></a>00648 <span class="comment">// tu mamy w tablicy pozycje elemntów zaraz po tekscie oznaczającym typ</span>
<a name="l00649"></a>00649 <span class="comment">// rejestruje wszystkie związki w zmiennych /sum i SR</span>
<a name="l00650"></a>00650  <span class="keywordflow">for</span> (a=0;a&lt;<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>();a++) <span class="comment">// po wszystkich komponentach</span>
<a name="l00651"></a>00651  {
<a name="l00652"></a>00652   tmpname = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(a,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>); <span class="comment">// pobieram nazwe komponentu</span>
<a name="l00653"></a>00653   <a class="code" href="class_c__my_run_process.html#a043667b22534fee299f3e8847c8a83b0" title="tu przechowuję zaimportowane parametry, - suma z zaimportowanych dla wszystkich...">SUM</a>.<a class="code" href="class_c___parameter___container.html#a1572fb9ba2f2ed524e0c6d908d4035c2">RegisterComponent</a>(tmpname); <span class="comment">// i go rejestruje</span>
<a name="l00654"></a>00654   <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a1572fb9ba2f2ed524e0c6d908d4035c2">RegisterComponent</a>(tmpname); <span class="comment">// </span>
<a name="l00655"></a>00655  }
<a name="l00656"></a>00656  <span class="keywordflow">for</span>(a=0;a&lt;<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#acf5b344c1a44480144bb3d1a93f138b2" title="Zwraca ilosc wpisów - danych przechowywanych.">GetIle</a>();a++) { <span class="comment">// po wszystkich parametrach (liniach w polu exports)</span>
<a name="l00657"></a>00657   suma = 0;
<a name="l00658"></a>00658   ile = 0;
<a name="l00659"></a>00659   fsetpos(fid,&amp;poz[a]);    <span class="comment">// na pierwsze dane</span>
<a name="l00660"></a>00660   <span class="keywordflow">while</span>(fscanf_s(fid,<span class="stringliteral">&quot;%lf&quot;</span>,&amp;tmp)!=0) {
<a name="l00661"></a>00661    suma+=tmp;
<a name="l00662"></a>00662    ile++;
<a name="l00663"></a>00663   }
<a name="l00664"></a>00664   SRtmp = suma/ile;
<a name="l00665"></a>00665   SUMtmp = suma;
<a name="l00668"></a>00668   <a class="code" href="class_c__my_run_process.html#a45cf7301e9af57afb3a0ca3a1c677660" title="ile jest elementów w prof">ile_danych</a> = ile; <span class="comment">// ta wartosc bedzie taka sama dla wszystkich wielkosci, potrzzeban bo niektóre są średnią a niektóre sumą</span>
<a name="l00670"></a>00670 <span class="comment"></span>  tmpname = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(a,<a class="code" href="_c___params_8h.html#aeab5e3f05378e5eb5ec519993130e19baab9911b5579ea04f3d52cdf824f2f5ef" title="jakiego komponentu sie dotyczy">EXPORT_COMPONENTS_NAZWA</a>); <span class="comment">// pobieram nazwę związku z kolejnej lini wpisu w exports</span>
<a name="l00671"></a>00671   tmppar = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a16ebed72b96272e07962716263599271">bEXPORTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(a,<a class="code" href="_c___params_8h.html#aeab5e3f05378e5eb5ec519993130e19badf4bb6bec69e8fcb216d21dbdd616ddb" title="jako co to mamy traktować? - wpisy dozwolone opisane w dokumentacji skryptu">EXPORT_PROP</a>); <span class="comment">// pobieram co jest zczytywane w danej lini (temperatura, itp)</span>
<a name="l00672"></a>00672   <span class="comment">// konwersja z wpisów użytkownika na właściwy format akeptowalny przez klasę C_Parameters_Container</span>
<a name="l00673"></a>00673   <span class="keywordflow">if</span> (strcmp(tmppar,<span class="stringliteral">&quot;TEMPERATURE&quot;</span>)==0 || strcmp(tmppar,<span class="stringliteral">&quot;temperature&quot;</span>)==0)
<a name="l00674"></a>00674    par = <a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da43e7da8f7f179c0faed10562b3a552ed">PARAM_TEMPERATURE</a>;
<a name="l00675"></a>00675   <span class="keywordflow">else</span>
<a name="l00676"></a>00676    <span class="keywordflow">if</span> (strcmp(tmppar,<span class="stringliteral">&quot;PRESSURE&quot;</span>)==0 || strcmp(tmppar,<span class="stringliteral">&quot;pressure&quot;</span>)==0)
<a name="l00677"></a>00677     par = <a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889daca4d3f332fe545193f92e71ccac70f06">PARAM_PRESSURE</a>;
<a name="l00678"></a>00678    <span class="keywordflow">else</span>
<a name="l00679"></a>00679     <span class="keywordflow">if</span> (strcmp(tmppar,<span class="stringliteral">&quot;TOTALFLOW&quot;</span>)==0 || strcmp(tmppar,<span class="stringliteral">&quot;totalflow&quot;</span>)==0)
<a name="l00680"></a>00680      par = <a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>;
<a name="l00681"></a>00681     <span class="keywordflow">else</span>
<a name="l00682"></a>00682      <span class="keywordflow">if</span> (strcmp(tmppar,<span class="stringliteral">&quot;FRACTION&quot;</span>)==0 || strcmp(tmppar,<span class="stringliteral">&quot;fraction&quot;</span>)==0)
<a name="l00683"></a>00683       par = <a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>;
<a name="l00684"></a>00684      <span class="keywordflow">else</span>
<a name="l00685"></a>00685       <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00686"></a>00686  
<a name="l00687"></a>00687   <span class="keywordflow">if</span> (strcmp(tmpname,<span class="stringliteral">&quot;ALL&quot;</span>)==0 || strcmp(tmpname,<span class="stringliteral">&quot;all&quot;</span>)==0) <span class="comment">// czyli wpisujemy do wszystkich komponentów</span>
<a name="l00688"></a>00688    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> b=0;b&lt;<a class="code" href="class_c__my_run_process.html#a043667b22534fee299f3e8847c8a83b0" title="tu przechowuję zaimportowane parametry, - suma z zaimportowanych dla wszystkich...">SUM</a>.<a class="code" href="class_c___parameter___container.html#a63e07ec8f12b69a7fe3abbe03f896542" title="Zwraca ilosc przechowywanych komponentów w klasie.">GetNumOfComponents</a>();b++)
<a name="l00689"></a>00689    {
<a name="l00692"></a>00692     <a class="code" href="class_c__my_run_process.html#a043667b22534fee299f3e8847c8a83b0" title="tu przechowuję zaimportowane parametry, - suma z zaimportowanych dla wszystkich...">SUM</a>.<a class="code" href="class_c___parameter___container.html#afb7cef66e701ffc8600352ffcce0b006" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToComp</a>(b,par,SUMtmp);
<a name="l00693"></a>00693     <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#afb7cef66e701ffc8600352ffcce0b006" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToComp</a>(b,par,SRtmp);
<a name="l00695"></a>00695    }   
<a name="l00696"></a>00696   <span class="keywordflow">else</span> <span class="comment">// wpisujemy tylko do wybranego</span>
<a name="l00697"></a>00697   {
<a name="l00698"></a>00698    <a class="code" href="class_c__my_run_process.html#a043667b22534fee299f3e8847c8a83b0" title="tu przechowuję zaimportowane parametry, - suma z zaimportowanych dla wszystkich...">SUM</a>.<a class="code" href="class_c___parameter___container.html#afb7cef66e701ffc8600352ffcce0b006" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToComp</a>(tmpname,par,SUMtmp);
<a name="l00699"></a>00699    <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#afb7cef66e701ffc8600352ffcce0b006" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToComp</a>(tmpname,par,SRtmp);
<a name="l00700"></a>00700   }
<a name="l00701"></a>00701 
<a name="l00702"></a>00702  }
<a name="l00703"></a>00703 
<a name="l00704"></a>00704  fclose(fid);
<a name="l00705"></a>00705 
<a name="l00706"></a>00706  <a class="code" href="definicje_8h.html#a506b3685b3eb05aac751f9e14cbed93b">SAFE_DELETE_ARRAY</a>(poz);
<a name="l00707"></a>00707  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00708"></a>00708 }
<a name="l00709"></a>00709 
<a name="l00710"></a>00710 <span class="comment">// pobiera parametry z klasy</span>
<a name="l00711"></a>00711 
<a name="l00712"></a><a class="code" href="class_c__my_run_process.html#a50bbb31558e2dc254c1583521bb291ec">00712</a> <span class="keywordtype">void</span> <a class="code" href="class_c__my_run_process.html#a50bbb31558e2dc254c1583521bb291ec" title="pobiera parametry z klasy na zewnątrz - wersja starsza">C_myRunProcess::GetParams</a>(<span class="keywordtype">double</span>&amp; temp, <span class="keywordtype">double</span> *fract, <span class="keywordtype">double</span>&amp; flow, <span class="keywordtype">double</span>&amp; pres)
<a name="l00713"></a>00713 {
<a name="l00714"></a>00714 <span class="comment">/* unsigned int a;</span>
<a name="l00715"></a>00715 <span class="comment"></span>
<a name="l00716"></a>00716 <span class="comment"> double tfratio;</span>
<a name="l00717"></a>00717 <span class="comment"> tfratio = atof(copyparams-&gt;bMOLEPERKG.DATA_CONTAINER[0]);</span>
<a name="l00718"></a>00718 <span class="comment"></span>
<a name="l00719"></a>00719 <span class="comment"> // wszystko przepisuje i dopiero w razie czego to zamieniam na to z fluenta</span>
<a name="l00720"></a>00720 <span class="comment"> temp = temperature;</span>
<a name="l00721"></a>00721 <span class="comment"> memcpy_s(fract,MAX_EXPORTS*sizeof(double),fraction,MAX_EXPORTS*sizeof(double));</span>
<a name="l00723"></a>00723 <span class="comment"> flow = totalflow;</span>
<a name="l00724"></a>00724 <span class="comment"> pres = pressure;</span>
<a name="l00725"></a>00725 <span class="comment"> for(a=0;a&lt;copyparams-&gt;bEXPORTS.GetIle();a++) {</span>
<a name="l00726"></a>00726 <span class="comment">  if(strcmp(copyparams-&gt;bEXPORTS.GetSubString(a,EXPORT_PROP),&quot;temperature&quot;)==0) {  // to znaczy że mamy z fluenta ten parametr</span>
<a name="l00727"></a>00727 <span class="comment">   temp = SR[a]; continue; }</span>
<a name="l00728"></a>00728 <span class="comment">  if(strcmp(copyparams-&gt;bEXPORTS.GetSubString(a,EXPORT_PROP),&quot;totalflow&quot;)==0)   // to znaczy że mamy z fluenta ten parametr</span>
<a name="l00729"></a>00729 <span class="comment">  {</span>
<a name="l00730"></a>00730 <span class="comment">   if(strcmp(copyparams-&gt;bBOUND_COND,&quot;mass-flow-inlet&quot;)==0)</span>
<a name="l00731"></a>00731 <span class="comment">   {</span>
<a name="l00732"></a>00732 <span class="comment">    flow = SUM[a]*tfratio; // wyjscie w kg/sec, przeliczone ma mol/sec</span>
<a name="l00733"></a>00733 <span class="comment">    continue;</span>
<a name="l00734"></a>00734 <span class="comment">   }</span>
<a name="l00735"></a>00735 <span class="comment">   if(copyparams-&gt;ValidateParams(VELOCITY_INLET))</span>
<a name="l00736"></a>00736 <span class="comment">   {</span>
<a name="l00737"></a>00737 <span class="comment">    double area = atof(copyparams-&gt;bINPUT_SURFACE.GetSubString(0,SURF_AREA));</span>
<a name="l00738"></a>00738 <span class="comment">    double density = atof(copyparams-&gt;bCOMPONENTS.GetSubString(0,COMPONENTS_GESTOSC));</span>
<a name="l00739"></a>00739 <span class="comment">    flow = SR[a]*density*area*tfratio; // wyjscie w m/sec przeliczone na mol/sec</span>
<a name="l00740"></a>00740 <span class="comment">    continue;</span>
<a name="l00741"></a>00741 <span class="comment">   }</span>
<a name="l00742"></a>00742 <span class="comment">  }</span>
<a name="l00743"></a>00743 <span class="comment">  if(strcmp(copyparams-&gt;bEXPORTS.GetSubString(a,EXPORT_PROP),&quot;pressure&quot;)==0) {  // to znaczy że mamy z fluenta ten parametr</span>
<a name="l00744"></a>00744 <span class="comment">   pres = SR[a]; continue; }</span>
<a name="l00745"></a>00745 <span class="comment">  if(strcmp(copyparams-&gt;bEXPORTS.GetSubString(a,EXPORT_PROP),&quot;fraction&quot;)==0) {  // to znaczy że mamy z fluenta ten parametr</span>
<a name="l00746"></a>00746 <span class="comment">   fract[a] = SR[a]; continue; }</span>
<a name="l00747"></a>00747 <span class="comment"> }</span>
<a name="l00748"></a>00748 <span class="comment">*/</span>
<a name="l00749"></a>00749 }
<a name="l00750"></a>00750 
<a name="l00751"></a>00751 <span class="comment">/*</span>
<a name="l00752"></a>00752 <span class="comment">BOOL C_myRunProcess::GetParams(SAFEARRAY *temperature, SAFEARRAY *fraction, SAFEARRAY *flow, SAFEARRAY *pressure, SAFEARRAY *compNames)</span>
<a name="l00755"></a>00755 <span class="comment">{</span>
<a name="l00756"></a>00756 <span class="comment"> LONG u,l,x; // ile componentów</span>
<a name="l00757"></a>00757 <span class="comment"> UINT dim;</span>
<a name="l00758"></a>00758 <span class="comment"> LONG a;</span>
<a name="l00759"></a>00759 <span class="comment"> CComBSTR tmp;</span>
<a name="l00760"></a>00760 <span class="comment"> double val,tfratio,valsum;</span>
<a name="l00761"></a>00761 <span class="comment"> LONG index = 0;</span>
<a name="l00762"></a>00762 <span class="comment"> BOOL ret;</span>
<a name="l00763"></a>00763 <span class="comment"> BOOL done = FAIL; // ok jeśli zostanie wykoana jakaś konwersja, czyli gdy wartość przepływu jest poprawna </span>
<a name="l00764"></a>00764 <span class="comment"> dim = SafeArrayGetDim(compNames);</span>
<a name="l00765"></a>00765 <span class="comment"> SafeArrayGetUBound(compNames,1,&amp;u);</span>
<a name="l00766"></a>00766 <span class="comment"> SafeArrayGetLBound(compNames,1,&amp;l);</span>
<a name="l00767"></a>00767 <span class="comment"> // pierwszy etap - przepisanie wszystkiego ze struktury C_Parameter_Container do SAFEARRAY, w drugim etapie dopiero zastępujemy tymi z fluenta</span>
<a name="l00768"></a>00768 <span class="comment"> for(a=l;a&lt;=u;a++) // po komponentach</span>
<a name="l00769"></a>00769 <span class="comment"> {</span>
<a name="l00770"></a>00770 <span class="comment">  SafeArrayGetElement(compNames, &amp;a, &amp;tmp);</span>
<a name="l00771"></a>00771 <span class="comment">  CW2A pszB(tmp); // nazwa komponentu</span>
<a name="l00772"></a>00772 <span class="comment"></span>
<a name="l00773"></a>00773 <span class="comment">// temepratura</span>
<a name="l00774"></a>00774 <span class="comment">  SafeArrayGetUBound(temperature,1,&amp;x);</span>
<a name="l00775"></a>00775 <span class="comment">  ret = SR.GetParameter(pszB,PARAM_TEMPERATURE,val);</span>
<a name="l00776"></a>00776 <span class="comment">  if(ret==FAIL) { // czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy. Przepisujemy domyślnie z wejscia 0</span>
<a name="l00777"></a>00777 <span class="comment">   ret = Parameters.GetParameterP(pszB,PARAM_TEMPERATURE,val,0);</span>
<a name="l00778"></a>00778 <span class="comment">   if(ret==FAIL) return FAIL;</span>
<a name="l00779"></a>00779 <span class="comment">  } else</span>
<a name="l00780"></a>00780 <span class="comment">   SR.GetParameter(pszB,PARAM_TEMPERATURE,val); // z fluenta</span>
<a name="l00781"></a>00781 <span class="comment">  if(a&gt;x) // to jest aby zachować rozmiary tablic takie jak podaje aspen - np dla kilku komponentow ta sama wartosc jest trzymana w jednej komórce</span>
<a name="l00782"></a>00782 <span class="comment">   SafeArrayPutElement(temperature,&amp;index,&amp;val); // to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l00783"></a>00783 <span class="comment">  else</span>
<a name="l00784"></a>00784 <span class="comment">   SafeArrayPutElement(temperature,&amp;a,&amp;val); // to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00785"></a>00785 <span class="comment">// cisnienie</span>
<a name="l00786"></a>00786 <span class="comment">  SafeArrayGetUBound(pressure,1,&amp;x);</span>
<a name="l00787"></a>00787 <span class="comment">  ret = SR.GetParameter(pszB,PARAM_PRESSURE,val);</span>
<a name="l00788"></a>00788 <span class="comment">  if(ret==FAIL) { // czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy</span>
<a name="l00789"></a>00789 <span class="comment">   ret = Parameters.GetParameterP(pszB,PARAM_PRESSURE,val,0);</span>
<a name="l00790"></a>00790 <span class="comment">   if(ret==FAIL) return FAIL;</span>
<a name="l00791"></a>00791 <span class="comment">  } else</span>
<a name="l00792"></a>00792 <span class="comment">   SR.GetParameter(pszB,PARAM_PRESSURE,val); // z fluenta</span>
<a name="l00793"></a>00793 <span class="comment">  if(a&gt;x)</span>
<a name="l00794"></a>00794 <span class="comment">   SafeArrayPutElement(pressure,&amp;index,&amp;val); // to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l00795"></a>00795 <span class="comment">  else</span>
<a name="l00796"></a>00796 <span class="comment">   SafeArrayPutElement(pressure,&amp;a,&amp;val); // to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00797"></a>00797 <span class="comment">// fraction</span>
<a name="l00798"></a>00798 <span class="comment">  SafeArrayGetUBound(fraction,1,&amp;x);</span>
<a name="l00799"></a>00799 <span class="comment">  ret = SR.GetParameter(pszB,PARAM_MOLEFRACTION,val);</span>
<a name="l00800"></a>00800 <span class="comment">  if(ret==FAIL) { // czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy</span>
<a name="l00801"></a>00801 <span class="comment">   ret = Parameters.GetParameterP(pszB,PARAM_MOLEFRACTION,val,0);</span>
<a name="l00802"></a>00802 <span class="comment">   if(ret==FAIL) return FAIL;</span>
<a name="l00803"></a>00803 <span class="comment">  } else</span>
<a name="l00804"></a>00804 <span class="comment">   SR.GetParameter(pszB,PARAM_MOLEFRACTION,val); // z fluenta</span>
<a name="l00805"></a>00805 <span class="comment">  if(ret==FAIL) return FAIL;</span>
<a name="l00806"></a>00806 <span class="comment">  if(a&gt;x)</span>
<a name="l00807"></a>00807 <span class="comment">   SafeArrayPutElement(fraction,&amp;index,&amp;val); // to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l00808"></a>00808 <span class="comment">  else</span>
<a name="l00809"></a>00809 <span class="comment">   SafeArrayPutElement(fraction,&amp;a,&amp;val); // to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00810"></a>00810 <span class="comment">// flow</span>
<a name="l00811"></a>00811 <span class="comment">  SafeArrayGetUBound(flow,1,&amp;x);</span>
<a name="l00812"></a>00812 <span class="comment">  ret = Parameters.GetParameterP(pszB,PARAM_MOLEPERKG,tfratio,0);</span>
<a name="l00813"></a>00813 <span class="comment">  ret = SR.GetParameter(pszB,PARAM_MOLEFLOW,val);</span>
<a name="l00814"></a>00814 <span class="comment">  if(ret==FAIL) { // czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy</span>
<a name="l00815"></a>00815 <span class="comment">   ret = Parameters.GetParameter(pszB,PARAM_MOLEFLOW,val);</span>
<a name="l00816"></a>00816 <span class="comment">   valsum = val;</span>
<a name="l00817"></a>00817 <span class="comment">   if(ret==FAIL) return FAIL;</span>
<a name="l00818"></a>00818 <span class="comment">  } else {</span>
<a name="l00819"></a>00819 <span class="comment">   SR.GetParameter(pszB,PARAM_MOLEFLOW,val); // są potrzebne 2</span>
<a name="l00820"></a>00820 <span class="comment">   SUM.GetParameter(pszB,PARAM_MOLEFLOW,valsum);</span>
<a name="l00821"></a>00821 <span class="comment">  }</span>
<a name="l00822"></a>00822 <span class="comment"></span>
<a name="l00823"></a>00823 <span class="comment">  // -----------------------------------------------------------------</span>
<a name="l00824"></a>00824 <span class="comment">  if(copyparams-&gt;ValidateParams(MASS_FLOW_INLET)) {</span>
<a name="l00825"></a>00825 <span class="comment">   val = valsum*tfratio; </span>
<a name="l00826"></a>00826 <span class="comment">   done = OK;</span>
<a name="l00827"></a>00827 <span class="comment">  }</span>
<a name="l00828"></a>00828 <span class="comment">  // -----------------------------------------------------------------</span>
<a name="l00829"></a>00829 <span class="comment">  if(copyparams-&gt;ValidateParams(VELOCITY_INLET)) {</span>
<a name="l00831"></a>00831 <span class="comment">   double area = atof(copyparams-&gt;bOUTPUT_SURFACE.GetSubString(0,SURF_AREA)); // pow</span>
<a name="l00832"></a>00832 <span class="comment">   double density;</span>
<a name="l00833"></a>00833 <span class="comment">   Parameters.GetParameterP(pszB,PARAM_DENSITY,density,0);</span>
<a name="l00834"></a>00834 <span class="comment">   val =  val*tfratio*density*area; </span>
<a name="l00835"></a>00835 <span class="comment">   done = OK;</span>
<a name="l00836"></a>00836 <span class="comment">  }</span>
<a name="l00837"></a>00837 <span class="comment">  if(a&gt;x)</span>
<a name="l00838"></a>00838 <span class="comment">   SafeArrayPutElement(flow,&amp;index,&amp;val); // to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l00839"></a>00839 <span class="comment">  else</span>
<a name="l00840"></a>00840 <span class="comment">   SafeArrayPutElement(flow,&amp;a,&amp;val); // to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00841"></a>00841 <span class="comment">  if(ret==FAIL || done==FAIL) return FAIL;</span>
<a name="l00842"></a>00842 <span class="comment"> } // koniec przepisywania, pętla po materiałach</span>
<a name="l00843"></a>00843 <span class="comment"> return OK;</span>
<a name="l00844"></a>00844 <span class="comment"></span>
<a name="l00845"></a>00845 <span class="comment">}</span>
<a name="l00846"></a>00846 <span class="comment"></span>
<a name="l00847"></a>00847 <span class="comment">*/</span>
<a name="l00848"></a>00848 
<a name="l00854"></a><a class="code" href="class_c__my_run_process.html#a7511e1d0a3cb9056ff87bd4a4cd4c886">00854</a> BOOL <a class="code" href="class_c__my_run_process.html#a50bbb31558e2dc254c1583521bb291ec" title="pobiera parametry z klasy na zewnątrz - wersja starsza">C_myRunProcess::GetParams</a>(SAFEARRAY *temperature, SAFEARRAY *fraction, SAFEARRAY *flow, SAFEARRAY *pressure, SAFEARRAY *compNames)
<a name="l00857"></a>00857 {
<a name="l00858"></a>00858  LONG u,l; <span class="comment">// ile componentów</span>
<a name="l00859"></a>00859  UINT dim;
<a name="l00860"></a>00860  LONG a;
<a name="l00861"></a>00861  CComBSTR tmp;
<a name="l00862"></a>00862  <span class="keywordtype">double</span> val,tfratio,valsum;
<a name="l00863"></a>00863  LONG index = 0;
<a name="l00864"></a>00864  BOOL ret;
<a name="l00865"></a>00865  BOOL done = <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>; <span class="comment">// ok jeśli zostanie wykoana jakaś konwersja, czyli gdy wartość przepływu jest poprawna </span>
<a name="l00866"></a>00866  dim = SafeArrayGetDim(compNames);
<a name="l00867"></a>00867  SafeArrayGetUBound(compNames,1,&amp;u);
<a name="l00868"></a>00868  SafeArrayGetLBound(compNames,1,&amp;l);
<a name="l00869"></a>00869  <span class="comment">// pierwszy etap - przepisanie wszystkiego ze struktury C_Parameter_Container do SAFEARRAY, w drugim etapie dopiero zastępujemy tymi z fluenta</span>
<a name="l00870"></a>00870  <a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#a9ad1d472e32f73bbcc3687194a8cecbd" title="Kasuje zawartość klasy - wszystkich danych wszystkich wejść.">ClearAllP</a>();
<a name="l00871"></a>00871  <span class="keywordflow">for</span>(a=l;a&lt;=u;a++) <span class="comment">// po komponentach</span>
<a name="l00872"></a>00872  {
<a name="l00873"></a>00873   SafeArrayGetElement(compNames, &amp;a, &amp;tmp);
<a name="l00874"></a>00874   CW2A pszB(tmp); <span class="comment">// nazwa komponentu</span>
<a name="l00875"></a>00875   ret=<a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#a05afe498977802765e4c562acd8f7214">RegisterComponentP</a>(pszB,0); <span class="comment">// rejestracja komponentu w tymczasowej zmiennej uzywanej tylko do zrzucania danych wyjsciowych na dysk</span>
<a name="l00876"></a>00876 
<a name="l00877"></a>00877 <span class="comment">// temepratura</span>
<a name="l00878"></a>00878   ret = <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da43e7da8f7f179c0faed10562b3a552ed">PARAM_TEMPERATURE</a>,val);
<a name="l00879"></a>00879   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) { <span class="comment">// czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy. Przepisujemy domyślnie z wejscia 0</span>
<a name="l00880"></a>00880    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da43e7da8f7f179c0faed10562b3a552ed">PARAM_TEMPERATURE</a>,val,0);
<a name="l00881"></a>00881    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00882"></a>00882   } <span class="keywordflow">else</span>
<a name="l00883"></a>00883    <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da43e7da8f7f179c0faed10562b3a552ed">PARAM_TEMPERATURE</a>,val); <span class="comment">// z fluenta</span>
<a name="l00884"></a>00884   ret=<a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da43e7da8f7f179c0faed10562b3a552ed">PARAM_TEMPERATURE</a>,val,0);
<a name="l00885"></a>00885   SafeArrayPutElement(temperature,&amp;index,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00886"></a>00886 <span class="comment">// cisnienie</span>
<a name="l00887"></a>00887   ret = <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889daca4d3f332fe545193f92e71ccac70f06">PARAM_PRESSURE</a>,val);
<a name="l00888"></a>00888   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) { <span class="comment">// czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy</span>
<a name="l00889"></a>00889    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889daca4d3f332fe545193f92e71ccac70f06">PARAM_PRESSURE</a>,val,0);
<a name="l00890"></a>00890    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00891"></a>00891   } <span class="keywordflow">else</span>
<a name="l00892"></a>00892    <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889daca4d3f332fe545193f92e71ccac70f06">PARAM_PRESSURE</a>,val); <span class="comment">// z fluenta</span>
<a name="l00893"></a>00893   ret=<a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889daca4d3f332fe545193f92e71ccac70f06">PARAM_PRESSURE</a>,val,0);
<a name="l00894"></a>00894   SafeArrayPutElement(pressure,&amp;index,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00895"></a>00895 <span class="comment">// fraction</span>
<a name="l00896"></a>00896   ret = <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,val);
<a name="l00897"></a>00897   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) { <span class="comment">// czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy</span>
<a name="l00898"></a>00898    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,val,0);
<a name="l00899"></a>00899    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00900"></a>00900   } <span class="keywordflow">else</span>
<a name="l00901"></a>00901    <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,val); <span class="comment">// z fluenta</span>
<a name="l00902"></a>00902   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00903"></a>00903   ret=<a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,val,0);
<a name="l00904"></a>00904   SafeArrayPutElement(fraction,&amp;index,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00905"></a>00905 <span class="comment">// flow</span>
<a name="l00906"></a>00906   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889dab277fde6ac1b0d1a161b275c23de6fb4">PARAM_MOLEPERKG</a>,tfratio,0);
<a name="l00907"></a>00907   ret = <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val);
<a name="l00908"></a>00908   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) { <span class="comment">// czyli najprawdopodbniej nie zostalo zainicjalizowane albo inny błąd - bierzemy z wejścia i przepisujemy</span>
<a name="l00909"></a>00909    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val);
<a name="l00910"></a>00910    valsum = val;
<a name="l00911"></a>00911    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00912"></a>00912   } <span class="keywordflow">else</span> {
<a name="l00913"></a>00913    <a class="code" href="class_c__my_run_process.html#a637f31651ba3ab358bf421ac633c93ed" title="tu przechowuję zaimportowane parametry,- srednia z zaimportowanych dla wszystkich...">SR</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val); <span class="comment">// są potrzebne 2</span>
<a name="l00914"></a>00914    <a class="code" href="class_c__my_run_process.html#a043667b22534fee299f3e8847c8a83b0" title="tu przechowuję zaimportowane parametry, - suma z zaimportowanych dla wszystkich...">SUM</a>.<a class="code" href="class_c___parameter___container.html#a3025843a154aec4c2e75a412ec81385e" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameter</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,valsum);
<a name="l00915"></a>00915   }
<a name="l00916"></a>00916 
<a name="l00917"></a>00917   <span class="comment">// -----------------------------------------------------------------</span>
<a name="l00918"></a>00918   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49bacc9672aca5e5a0d33bb1edce2430d4a8" title="do mass flow inlet">MASS_FLOW_INLET</a>)) {
<a name="l00919"></a>00919    val = valsum*tfratio; 
<a name="l00920"></a>00920    done = <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00921"></a>00921   }
<a name="l00922"></a>00922   <span class="comment">// -----------------------------------------------------------------</span>
<a name="l00923"></a>00923   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba49c462317b47c1fe0d3cc1e73d3778d6" title="czy sa wszystkie rzeczy do velocity? (gestosc i powierzchnia)">VELOCITY_INLET</a>)) {
<a name="l00925"></a>00925    <span class="keywordtype">double</span> area = atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a40e2d5c41b5e45ab7da608872331c33d">bOUTPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#ad561bf88c5eba4807b29ed7384a152fea96d69fb38efa1ee2442fc8a08095e05d">SURF_AREA</a>)); <span class="comment">// pow</span>
<a name="l00926"></a>00926    <span class="keywordtype">double</span> density;
<a name="l00927"></a>00927    <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889dab450255dd5d6652e971cb420e61c4504">PARAM_DENSITY</a>,density,0);
<a name="l00928"></a>00928    val =  val*tfratio*density*area; 
<a name="l00929"></a>00929    done = <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00930"></a>00930   }
<a name="l00931"></a>00931   ret=<a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val,0);
<a name="l00932"></a>00932   SafeArrayPutElement(flow,&amp;index,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l00933"></a>00933   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a> || done==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00934"></a>00934 
<a name="l00935"></a>00935   index++; <span class="comment">// tablice wejściowe mogą być różnie numerowane(indexy) ale te wyjsciowe są zawsze od 0</span>
<a name="l00936"></a>00936  } <span class="comment">// koniec przepisywania, pętla po materiałach</span>
<a name="l00937"></a>00937  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00938"></a>00938 
<a name="l00939"></a>00939 }
<a name="l00940"></a>00940 
<a name="l00941"></a>00941 <span class="comment">// wpisuje parametry do klasy</span>
<a name="l00942"></a><a class="code" href="class_c__my_run_process.html#a92c79daa78da34aa38f14ec7f4f8a1ac">00942</a> BOOL <a class="code" href="class_c__my_run_process.html#a92c79daa78da34aa38f14ec7f4f8a1ac" title="wpisuje parametry do klasy, wersja starsza">C_myRunProcess::PutParams</a>(<span class="keywordtype">double</span> temp, <span class="keywordtype">double</span> *fract, <span class="keywordtype">double</span> flow, <span class="keywordtype">double</span> pres)
<a name="l00944"></a>00944 {
<a name="l00945"></a>00945  <span class="keywordtype">double</span> tfratio;
<a name="l00946"></a>00946  tfratio = atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a71e66a7080523ea24396e590e5ff3117">bMOLEPERKG</a>.<a class="code" href="class_data___to___read.html#a0127dc66bbc041af9b172b81e9ae8520">DATA_CONTAINER</a>[0]); <span class="comment">// zmienic!!!</span>
<a name="l00947"></a>00947 
<a name="l00948"></a>00948  <a class="code" href="class_c__my_run_process.html#ac3c7b3104b2ca8941bf792ee13e194e7">temperature</a> = temp;
<a name="l00949"></a>00949  memcpy_s(<a class="code" href="class_c__my_run_process.html#abb3c97a82bf991d636674645020a4dfe">fraction</a>,<a class="code" href="definicje_8h.html#a2088367026f360e5b7099098f4b9d39c">MAX_EXPORTS</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>),fract,<a class="code" href="definicje_8h.html#a2088367026f360e5b7099098f4b9d39c">MAX_EXPORTS</a>*<span class="keyword">sizeof</span>(<span class="keywordtype">double</span>));
<a name="l00950"></a>00950  <a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a> = flow; <span class="comment">// jakby zaden if nie wyszedl</span>
<a name="l00951"></a>00951  <span class="keywordflow">if</span>(strcmp(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0e930ef00f35044a8a11dca5be4e3a92">bBOUND_COND</a>,<span class="stringliteral">&quot;MASS-FLOW-INLET&quot;</span>)==0)
<a name="l00952"></a>00952   <a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a> = flow/tfratio; <span class="comment">// z aspena wychodza mole/sec, tu przeliczenie na kg/sec</span>
<a name="l00953"></a>00953  <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba49c462317b47c1fe0d3cc1e73d3778d6" title="czy sa wszystkie rzeczy do velocity? (gestosc i powierzchnia)">VELOCITY_INLET</a>)) {
<a name="l00954"></a>00954   <span class="keywordtype">double</span> area = atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#ad561bf88c5eba4807b29ed7384a152fea96d69fb38efa1ee2442fc8a08095e05d">SURF_AREA</a>));
<a name="l00955"></a>00955   <span class="keywordtype">double</span> density = atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(0,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecab7ae8443f2b290b7b97e7ec2d118fbff">COMPONENTS_GESTOSC</a>));
<a name="l00956"></a>00956   <a class="code" href="class_c__my_run_process.html#a1fed0139e9d00c4f8974d82bcdef5a07">totalflow</a> =  (flow/tfratio)/(density*area); <span class="comment">// przeliczenie z moli/s na m/s</span>
<a name="l00957"></a>00957  }
<a name="l00958"></a>00958  <a class="code" href="class_c__my_run_process.html#abf308a56d97c13ecb34fe1eb615110e5">pressure</a> = pres;
<a name="l00959"></a>00959  <a class="code" href="class_c__my_run_process.html#a83e882d315a2f3d233fedf91cb29a62f" title="jesli 1 to parametry aktualne">paramsval</a> = TRUE;
<a name="l00960"></a>00960  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l00961"></a>00961 }
<a name="l00962"></a>00962 
<a name="l00963"></a><a class="code" href="class_c__my_run_process.html#a8bf8241f0ff9398a64c00176022d677d">00963</a> BOOL <a class="code" href="class_c__my_run_process.html#a92c79daa78da34aa38f14ec7f4f8a1ac" title="wpisuje parametry do klasy, wersja starsza">C_myRunProcess::PutParams</a>(SAFEARRAY *temperature, SAFEARRAY *fraction, SAFEARRAY *flow, SAFEARRAY *pressure, SAFEARRAY *compNames,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> inputID)
<a name="l00966"></a>00966 {
<a name="l00967"></a>00967  LONG u,l,x; <span class="comment">// ile componentów</span>
<a name="l00968"></a>00968  UINT dim;
<a name="l00969"></a>00969  LONG a;
<a name="l00970"></a>00970  CComBSTR tmp;
<a name="l00971"></a>00971  <span class="keywordtype">double</span> val,tfratio;
<a name="l00972"></a>00972  LONG index = 0;
<a name="l00973"></a>00973  BOOL ret;
<a name="l00974"></a>00974  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> compid = 0;
<a name="l00975"></a>00975  <span class="keywordtype">int</span> line;
<a name="l00976"></a>00976  <span class="keywordtype">char</span>* tmpmat;
<a name="l00977"></a>00977  BOOL done = <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>; <span class="comment">// ok jeśli zostanie wykoana jakaś konwersja, czyli gdy wartość przepływu jest poprawna </span>
<a name="l00978"></a>00978  dim = SafeArrayGetDim(compNames);
<a name="l00979"></a>00979  SafeArrayGetUBound(compNames,1,&amp;u);
<a name="l00980"></a>00980  SafeArrayGetLBound(compNames,1,&amp;l);
<a name="l00981"></a>00981  <span class="keywordflow">for</span> (a=l;a&lt;=u;a++)
<a name="l00982"></a>00982  {
<a name="l00983"></a>00983   SafeArrayGetElement(compNames, &amp;a, &amp;tmp);
<a name="l00984"></a>00984   CW2A pszB(tmp);
<a name="l00985"></a>00985   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a05afe498977802765e4c562acd8f7214">RegisterComponentP</a>(pszB,inputID);
<a name="l00986"></a>00986   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00987"></a>00987 <span class="comment">// gęstosc (z skryptu)</span>
<a name="l00988"></a>00988   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba49c462317b47c1fe0d3cc1e73d3778d6" title="czy sa wszystkie rzeczy do velocity? (gestosc i powierzchnia)">VELOCITY_INLET</a>))
<a name="l00989"></a>00989   {
<a name="l00990"></a>00990    line = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a1f2247e03f494d45dd2bacf4fde00c92" title="Zwraca numer linii zawierającej dany ciąg tekstowy na danej pozycji podciągu....">GetLineIndex</a>(pszB,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>);
<a name="l00991"></a>00991    <span class="keywordflow">if</span>(line&lt;0) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00992"></a>00992    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889dab450255dd5d6652e971cb420e61c4504">PARAM_DENSITY</a>,atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecab7ae8443f2b290b7b97e7ec2d118fbff">COMPONENTS_GESTOSC</a>)),inputID);
<a name="l00993"></a>00993    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l00994"></a>00994   }
<a name="l00995"></a>00995 <span class="comment">// moleperkilo (z skryptu)</span>
<a name="l00996"></a>00996   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba49c462317b47c1fe0d3cc1e73d3778d6" title="czy sa wszystkie rzeczy do velocity? (gestosc i powierzchnia)">VELOCITY_INLET</a>))
<a name="l00997"></a>00997   {
<a name="l00998"></a>00998    line = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a1f2247e03f494d45dd2bacf4fde00c92" title="Zwraca numer linii zawierającej dany ciąg tekstowy na danej pozycji podciągu....">GetLineIndex</a>(pszB,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8ecaac6154b66d6befe494a950522bed86e6">COMPONENTS_NAZWA</a>);
<a name="l00999"></a>00999    <span class="keywordflow">if</span>(line&lt;0) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01000"></a>01000    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889dab277fde6ac1b0d1a161b275c23de6fb4">PARAM_MOLEPERKG</a>,atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ae54ad1f94c5d33db56436e556a2ed9f9">bCOMPONENTS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#afb924e136e034239095f7592b57bd8eca9d7baa5fc3af7791ff7c3436caf41948">COMPONENTS_MOLEPERKG</a>)),inputID);
<a name="l01001"></a>01001    <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01002"></a>01002   }
<a name="l01003"></a>01003 <span class="comment">// temepratura</span>
<a name="l01004"></a>01004   SafeArrayGetUBound(temperature,1,&amp;x);
<a name="l01005"></a>01005   <span class="keywordflow">if</span>(a&gt;x)
<a name="l01006"></a>01006    SafeArrayGetElement(temperature,&amp;index,&amp;val); <span class="comment">// to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l01007"></a>01007   <span class="keywordflow">else</span>
<a name="l01008"></a>01008    SafeArrayGetElement(temperature,&amp;a,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l01009"></a>01009   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da43e7da8f7f179c0faed10562b3a552ed">PARAM_TEMPERATURE</a>,val,inputID);
<a name="l01010"></a>01010   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01011"></a>01011 <span class="comment">// cisnienie</span>
<a name="l01012"></a>01012   SafeArrayGetUBound(pressure,1,&amp;x);
<a name="l01013"></a>01013   <span class="keywordflow">if</span>(a&gt;x)
<a name="l01014"></a>01014    SafeArrayGetElement(pressure,&amp;index,&amp;val); <span class="comment">// to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l01015"></a>01015   <span class="keywordflow">else</span>
<a name="l01016"></a>01016    SafeArrayGetElement(pressure,&amp;a,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l01017"></a>01017   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889daca4d3f332fe545193f92e71ccac70f06">PARAM_PRESSURE</a>,val,inputID);
<a name="l01018"></a>01018   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01019"></a>01019 <span class="comment">// fraction</span>
<a name="l01020"></a>01020   SafeArrayGetUBound(fraction,1,&amp;x);
<a name="l01021"></a>01021   <span class="keywordflow">if</span>(a&gt;x)
<a name="l01022"></a>01022    SafeArrayGetElement(fraction,&amp;index,&amp;val); <span class="comment">// to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l01023"></a>01023   <span class="keywordflow">else</span>
<a name="l01024"></a>01024    SafeArrayGetElement(fraction,&amp;a,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l01025"></a>01025   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,val,inputID);
<a name="l01026"></a>01026   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01027"></a>01027 <span class="comment">// flow</span>
<a name="l01028"></a>01028   SafeArrayGetUBound(flow,1,&amp;x);
<a name="l01029"></a>01029   <span class="keywordflow">if</span>(a&gt;x)
<a name="l01030"></a>01030    SafeArrayGetElement(flow,&amp;index,&amp;val); <span class="comment">// to jeśli jeden parametr będzie dla wszystkich komponentów</span>
<a name="l01031"></a>01031   <span class="keywordflow">else</span>
<a name="l01032"></a>01032    SafeArrayGetElement(flow,&amp;a,&amp;val); <span class="comment">// to jeśli każdy komponent ma inną wartość parametru</span>
<a name="l01033"></a>01033   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val,inputID); <span class="comment">// jesli zaden z if ponizej nie wyjdzie</span>
<a name="l01034"></a>01034   ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889dab277fde6ac1b0d1a161b275c23de6fb4">PARAM_MOLEPERKG</a>,tfratio,inputID);
<a name="l01035"></a>01035 <span class="comment">// -----------------------------------------------------------------</span>
<a name="l01036"></a>01036   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49bacc9672aca5e5a0d33bb1edce2430d4a8" title="do mass flow inlet">MASS_FLOW_INLET</a>)) {
<a name="l01037"></a>01037    val = val/tfratio; <span class="comment">// z aspena wychodza mole/sec, tu przeliczenie na kg/sec</span>
<a name="l01038"></a>01038    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val,inputID);
<a name="l01039"></a>01039    done = <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l01040"></a>01040   }
<a name="l01041"></a>01041 <span class="comment">// -----------------------------------------------------------------</span>
<a name="l01042"></a>01042 
<a name="l01043"></a>01043   <span class="keywordflow">if</span>(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a96db4b5bc8d67d374eb52b3d4b90446d" title="Dokonuje sprawdzenia czy spełnione są określone warunki.">ValidateParams</a>(<a class="code" href="definicje_8h.html#aef3103db9dfc120e792e4a4ec154f49ba49c462317b47c1fe0d3cc1e73d3778d6" title="czy sa wszystkie rzeczy do velocity? (gestosc i powierzchnia)">VELOCITY_INLET</a>)) {
<a name="l01044"></a>01044    line = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a1f2247e03f494d45dd2bacf4fde00c92" title="Zwraca numer linii zawierającej dany ciąg tekstowy na danej pozycji podciągu....">GetLineIndex</a>(pszB,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97a5412f41e0ca92fdb3faff46bf390d943">ASSIGN_COMPONENTS_NAZWA</a>); <span class="keywordflow">if</span>(line&lt;0) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>; <span class="comment">// linia z nazwą materiału</span>
<a name="l01045"></a>01045    tmpmat = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#a0f52ddebff9d847a93fc389ab91fcb6c">bASSIGNS</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#adb778f9c8bbe99555b27719ef42f0a97a7247cd4d1a5ee45dbf990c5d0b51e6db">ASSIGN_SURF_NAME</a>); <span class="comment">// nazwa wejscia skojarzona z materialem</span>
<a name="l01046"></a>01046    line = <a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a1f2247e03f494d45dd2bacf4fde00c92" title="Zwraca numer linii zawierającej dany ciąg tekstowy na danej pozycji podciągu....">GetLineIndex</a>(tmpmat,<a class="code" href="_c___params_8h.html#ad561bf88c5eba4807b29ed7384a152fea01910b80a3290017bbcf77ee863160cb">SURF_NAME</a>); <span class="keywordflow">if</span>(line&lt;0) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>; <span class="comment">// nr lini z nazwa powierzchni wejsc</span>
<a name="l01047"></a>01047    <span class="keywordtype">double</span> area = atof(<a class="code" href="class_c__my_run_process.html#a2a8bbae97812661f19f491305f212319" title="kopia klasy zawierającej parametry ze skryptu (nie modyfiować tu)">copyparams</a>-&gt;<a class="code" href="class_c___params.html#ad5c614b66d7b7bb32a8d1b67f25c7a31">bINPUT_SURFACE</a>.<a class="code" href="class_data___to___read.html#a6a3deab57b0e9d8e040ab3c548595bf9" title="Zwraca wskaźnik do podciągu.">GetSubString</a>(line,<a class="code" href="_c___params_8h.html#ad561bf88c5eba4807b29ed7384a152fea96d69fb38efa1ee2442fc8a08095e05d">SURF_AREA</a>)); <span class="comment">// pow</span>
<a name="l01048"></a>01048    <span class="keywordtype">double</span> density,molefr;
<a name="l01049"></a>01049    <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889dab450255dd5d6652e971cb420e61c4504">PARAM_DENSITY</a>,density,inputID);
<a name="l01050"></a>01050    <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a40f71af3c7efa9ae20bad902f781f7d0" title="Zwraca parametr komponentu - rozpoznaje po nazwie.">GetParameterP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da1e11cdf828f0d2835b17ea6f2c05132b">PARAM_MOLEFRACTION</a>,molefr,inputID);
<a name="l01051"></a>01051    val =  ((val/tfratio)/(density*area))*molefr; <span class="comment">// przeliczenie z moli/s na m/s, val - wartosc z aspena początkowa, uwzględniony udział molowy materiału w strumieniu</span>
<a name="l01052"></a>01052    ret = <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#a0084a3c896460b40ff0ae1505ba069ec" title="Dodaje parametr do komponentu - rozpoznaje po id.">AssignParamToCompP</a>(pszB,<a class="code" href="_c___parameters___set_8h.html#a18416475c1b6f92f8341a0bb847e889da120683c83b270c0e909b69e4c4f9f0fc">PARAM_MOLEFLOW</a>,val,inputID);
<a name="l01053"></a>01053    done = <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l01054"></a>01054   }
<a name="l01055"></a>01055   <span class="keywordflow">if</span>(ret==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a> || done==<a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>) <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01056"></a>01056  }
<a name="l01057"></a>01057 
<a name="l01058"></a>01058  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l01059"></a>01059 }
<a name="l01060"></a>01060 
<a name="l01061"></a><a class="code" href="class_c__my_run_process.html#ae6b5f57310ae330f061f867d0582ee4e">01061</a> BOOL <a class="code" href="class_c__my_run_process.html#ae6b5f57310ae330f061f867d0582ee4e" title="Drukuje zawartość portów do pliku.">C_myRunProcess::PrintPutParameters</a>(<span class="keywordtype">char</span>* nazwa)
<a name="l01064"></a>01064 {
<a name="l01065"></a>01065  errno_t <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>;
<a name="l01066"></a>01066  FILE* fid;
<a name="l01067"></a>01067  <span class="keywordflow">if</span>( (err  = fopen_s( &amp;fid, nazwa, <span class="stringliteral">&quot;w+&quot;</span> )) !=0 )
<a name="l01068"></a>01068       <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01069"></a>01069 
<a name="l01070"></a>01070  <span class="keywordtype">char</span> timeline[26];
<a name="l01071"></a>01071  <span class="keyword">struct </span>_timeb timebuffer;
<a name="l01072"></a>01072  _ftime_s( &amp;timebuffer );
<a name="l01073"></a>01073  ctime_s( timeline, 26, &amp; ( timebuffer.time ) );
<a name="l01074"></a>01074 
<a name="l01075"></a>01075  fprintf(fid,<span class="stringliteral">&quot;\n-- %.19s.%hu %s\n&quot;</span>, timeline, timebuffer.millitm, &amp;timeline[18] );
<a name="l01076"></a>01076 
<a name="l01077"></a>01077  <a class="code" href="class_c__my_run_process.html#ac47af15c899f84dde717500688440bd9">Parameters</a>.<a class="code" href="class_c___port_parameter___container.html#af7ff20d9bcd1cd8a2f927b8cb7679ea8" title="Drukuje zawartość portów do pliku.">PrintParams</a>(fid);
<a name="l01078"></a>01078 
<a name="l01079"></a>01079  fclose(fid);
<a name="l01080"></a>01080  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l01081"></a>01081 
<a name="l01082"></a>01082 }
<a name="l01083"></a>01083 
<a name="l01084"></a><a class="code" href="class_c__my_run_process.html#aef8a141a9982779c57bb5931d87d710b">01084</a> BOOL <a class="code" href="class_c__my_run_process.html#aef8a141a9982779c57bb5931d87d710b" title="Drukuje zawartość portów do pliku.">C_myRunProcess::PrintGetParameters</a>(<span class="keywordtype">char</span>* nazwa)
<a name="l01087"></a>01087 {
<a name="l01088"></a>01088  errno_t <a class="code" href="class_c__my_run_process.html#af9f58dd664386638ca9406976cac0554" title="Klasa obsługi błędów.">err</a>;
<a name="l01089"></a>01089  FILE* fid;
<a name="l01090"></a>01090  <span class="keywordflow">if</span>( (err  = fopen_s( &amp;fid, nazwa, <span class="stringliteral">&quot;w+&quot;</span> )) !=0 )
<a name="l01091"></a>01091       <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#abb508ea8227673f419e9fe3a86c30d8e">FAIL</a>;
<a name="l01092"></a>01092 
<a name="l01093"></a>01093  <span class="keywordtype">char</span> timeline[26];
<a name="l01094"></a>01094  <span class="keyword">struct </span>_timeb timebuffer;
<a name="l01095"></a>01095  _ftime_s( &amp;timebuffer );
<a name="l01096"></a>01096  ctime_s( timeline, 26, &amp; ( timebuffer.time ) );
<a name="l01097"></a>01097 
<a name="l01098"></a>01098  fprintf(fid,<span class="stringliteral">&quot;\n-- %.19s.%hu %s\n&quot;</span>, timeline, timebuffer.millitm, &amp;timeline[18] );
<a name="l01099"></a>01099 
<a name="l01100"></a>01100  <a class="code" href="class_c__my_run_process.html#a5f6e88a7ccf982c8906ca840cfac81bb" title="tymczasowa zmienna do przechowywania przeliczonych parametrów wyjściowych (takich...">outParameters</a>.<a class="code" href="class_c___port_parameter___container.html#af7ff20d9bcd1cd8a2f927b8cb7679ea8" title="Drukuje zawartość portów do pliku.">PrintParams</a>(fid);
<a name="l01101"></a>01101 
<a name="l01102"></a>01102  fclose(fid);
<a name="l01103"></a>01103  <span class="keywordflow">return</span> <a class="code" href="definicje_8h.html#aba51915c87d64af47fb1cc59348961c9">OK</a>;
<a name="l01104"></a>01104 
<a name="l01105"></a>01105 }
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Wygenerowano Sat Nov 6 18:22:21 2010 dla cape2fluent programem&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
